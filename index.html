<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>月影剑博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="月影剑博客">
<meta property="og:url" content="http://mooncool.github.io/index.html">
<meta property="og:site_name" content="月影剑博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="月影剑博客">
  
    <link rel="alternate" href="/atom.xml" title="月影剑博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">月影剑博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">知道的越多，不知道的也越多。生命不息，学习不止！</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://mooncool.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-operation-guide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/02/operation-guide/" class="article-date">
  <time datetime="2017-11-02T13:48:35.000Z" itemprop="datePublished">2017-11-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/02/operation-guide/">运维规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="运维规范"><a href="#运维规范" class="headerlink" title="运维规范"></a>运维规范</h1><h2 id="机器命名规范"><a href="#机器命名规范" class="headerlink" title="机器命名规范"></a>机器命名规范</h2><p>机器名采用如下规则命名：</p>
<p><code>[地域简拼]-[产品名简写]-[环境][编号].[地域简拼][编号]</code></p>
<p>例如：<code>qd-venus-prod01.qd01</code></p>
<p>表示：<code>青岛-材料中心(代号Venus)-生产环境01号.青岛01号</code></p>
<p>这样，同一区域有多少机器，一目了然；同一产品的同一环境有多少台机器，也一目了然</p>
<h2 id="数据库命名规范"><a href="#数据库命名规范" class="headerlink" title="数据库命名规范"></a>数据库命名规范</h2><p>数据库名采用如下规则命名(<em>不分库时，可以不加编号</em>)：</p>
<p><code>[产品名简写]-[环境][编号]</code>或<code>[产品名简写]-[环境][编号]-[主从][编号]</code></p>
<p>例如：<code>venus-prod01</code>或<code>venus-prod01-slave02</code></p>
<h2 id="部署规范"><a href="#部署规范" class="headerlink" title="部署规范"></a>部署规范</h2><h3 id="Linux环境"><a href="#Linux环境" class="headerlink" title="Linux环境"></a>Linux环境</h3><p>初次购买完Linux服务器(以CentOS为例)，先运行更新命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># yum update -y</div></pre></td></tr></table></figure></p>
<p>将系统更新至最新版再部署(必要时候需重启服务器)</p>
<h3 id="默认语言"><a href="#默认语言" class="headerlink" title="默认语言"></a>默认语言</h3><p>设置系统默认语言：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># vi /etc/environment</div></pre></td></tr></table></figure></p>
<p>为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">LANG=en_US.UTF-8</div><div class="line">LC_ALL=C</div></pre></td></tr></table></figure></p>
<h3 id="依赖软件包安装"><a href="#依赖软件包安装" class="headerlink" title="依赖软件包安装"></a>依赖软件包安装</h3><p>尽量使用<code>yum install</code>命令来安装。</p>
<h3 id="运行权限"><a href="#运行权限" class="headerlink" title="运行权限"></a>运行权限</h3><p>创建<code>work</code>账号：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># adduser work</div></pre></td></tr></table></figure></p>
<p>所有程序均运行在<code>work</code>权限下，<strong>特别是<code>nginx</code>或者<code>httpd</code>进程！！！</strong></p>
<h3 id="Web程序部署"><a href="#Web程序部署" class="headerlink" title="Web程序部署"></a>Web程序部署</h3><p>使用<code>work</code>账号创建目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mkdir ~/www</div></pre></td></tr></table></figure></p>
<p>Web项目按项目名称依次部署在<code>www</code>目录下，如：<code>~/www/venus</code></p>
<h3 id="Log记录"><a href="#Log记录" class="headerlink" title="Log记录"></a>Log记录</h3><p>使用<code>work</code>账号创建目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mkdir ~/var/logs</div></pre></td></tr></table></figure></p>
<p>Web项目的log按项目名称依次写入在<code>logs</code>目录下，如：<code>~/var/logs/venus</code></p>
<h3 id="代码备份"><a href="#代码备份" class="headerlink" title="代码备份"></a>代码备份</h3><p>使用<code>work</code>账号创建目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mkdir ~/opt/backups</div></pre></td></tr></table></figure></p>
<p>项目代码按日期备份在<code>backups</code>目录下，如：<code>~/opt/backups/20171102/venus-201711022000</code></p>
<h3 id="代码部署"><a href="#代码部署" class="headerlink" title="代码部署"></a>代码部署</h3><p>以Git为例：</p>
<ol>
<li>在git-server.thinkerx.com系统里，创建<code>deploy</code>账号</li>
<li>为<code>deploy</code>账号分配代码权限，权限为只读</li>
<li>通过<code>TAG</code>来上线</li>
</ol>
<h2 id="生产环境注意事项"><a href="#生产环境注意事项" class="headerlink" title="生产环境注意事项"></a>生产环境注意事项</h2><ol>
<li>prod环境机器、数据库必须跟dev、test环境分开，用独立的机器、数据库</li>
<li>prod环境数据库，必须修改默认端口(建议8000~9999端口)</li>
<li>prod环境数据库，必须只能内网访问，并配置IP白名单</li>
<li>prod环境数据库，必须提供rw(读写)和ro(只读)，两套账号，命名建议<code>[产品名]-[读写]</code>，如：<code>venus-ro</code></li>
<li>prod环境机器必须配置端口访问规则，如提供内部访问，必须配置IP白名单，并关闭外网网卡(建议8000~9999端口)；如提供公网访问，必须只能提供有限端口，且不得使用默认端口(建议10000以上端口，80端口除外)</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mooncool.github.io/2017/11/02/operation-guide/" data-id="cjcg9ph2p00042eyrxvukqcqv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码规范/">代码规范</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-use-hard-disk-as-ram" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/10/09/use-hard-disk-as-ram/" class="article-date">
  <time datetime="2017-10-09T05:35:17.000Z" itemprop="datePublished">2017-10-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/10/09/use-hard-disk-as-ram/">Linux下把硬盘当作内存</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在这个内存涨价贵如油，硬盘却不值钱的时候，想办法把硬盘用作内存，是个相当划算的做法(手动坏笑)。<br>废话不多说，让我们搞起来！</p>
<ol>
<li>第一步先在硬盘上创建一块“虚拟内存”空间(🌰 中是1G的虚拟内存)</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dd if=/dev/zero of=~/vram bs=4096 count=262144</div></pre></td></tr></table></figure>
<p>以上的路径可以自己定义，count后面的数字算法：<code>1024 * 1024^2 / 4096 = 262144</code><br>如果是512MB，则：<code>512 * 1024^2 / 4096 = 131072</code><br>以此类推。</p>
<p>还有更简单的方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fallocate -l 4G ~/vram</div></pre></td></tr></table></figure>
<p>要多少，直接后面加，可以M、G各种单位。</p>
<ol>
<li>第二步当然是把这块内存初始化一下了</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkswap ~/vram -f</div></pre></td></tr></table></figure>
<p>路径请自行改成上面自己定义的路径。</p>
<ol>
<li>第三步，挂接上去，大功告成！</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo swapon -p 1000 ~/vram</div></pre></td></tr></table></figure>
<p>注意这一步是用root权限哦！不然会报错<code>swapon failed: Operation not permitted</code>。<br>大功告成，让我们检查一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">free -m</div></pre></td></tr></table></figure>
<p>如果看到 swap 变大了，那么就恭喜你，成功了！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mooncool.github.io/2017/10/09/use-hard-disk-as-ram/" data-id="cjcg9ph3a00102eyrvl3iq055" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-shadowsocks" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/09/08/shadowsocks/" class="article-date">
  <time datetime="2017-09-08T13:45:15.000Z" itemprop="datePublished">2017-09-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/08/shadowsocks/">Shadowsocks安装及配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Shadowsocks安装"><a href="#Shadowsocks安装" class="headerlink" title="Shadowsocks安装"></a>Shadowsocks安装</h1><p>Linux下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install python-setuptools &amp;&amp; easy_install pip</div></pre></td></tr></table></figure>
<p>显示完成后，再输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install shadowsocks</div></pre></td></tr></table></figure>
<p>等待安装完成，显示“Successfully installed shadowsocks-2.6.10”，意味着 Shadowsocks 已经成功安装。</p>
<h1 id="Shadowsocks配置"><a href="#Shadowsocks配置" class="headerlink" title="Shadowsocks配置"></a>Shadowsocks配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi [path/to/shadowsocks-config].json</div></pre></td></tr></table></figure>
<p>基本配置文件如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"server"</span>: <span class="string">"your_server_ip"</span>,</div><div class="line">    <span class="attr">"server_port"</span>: <span class="number">8388</span>,</div><div class="line">    <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</div><div class="line">    <span class="attr">"local_port"</span>: <span class="number">1080</span>,</div><div class="line">    <span class="attr">"password"</span>: <span class="string">"mooncool.github.com"</span>,</div><div class="line">    <span class="attr">"timeout"</span>: <span class="number">300</span>,</div><div class="line">    <span class="attr">"method"</span>: <span class="string">"aes-256-cfb"</span>,</div><div class="line">    <span class="attr">"fast_open"</span>: <span class="literal">false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>各个参数说明如下：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>server</td>
<td>Y</td>
<td>填入你的服务器 IP ，即当前操作的 VPS 的 IP 地址，<em>必须修改</em></td>
</tr>
<tr>
<td>server_port</td>
<td>N</td>
<td>服务器端口，<em>可以根据实际需要修改</em>，或者保持默认</td>
</tr>
<tr>
<td>local_address</td>
<td>N</td>
<td>本地监听地址，<em>建议保持默认</em></td>
</tr>
<tr>
<td>local_port</td>
<td>N</td>
<td>本地端口，这个参数一般 <em>保持默认</em> 即可</td>
</tr>
<tr>
<td>password</td>
<td>Y</td>
<td>用来加密的密码，<em>可以根据实际需要修改</em></td>
</tr>
<tr>
<td>timeout</td>
<td>N</td>
<td>单位秒，一般 <em>保持默认</em> 即可</td>
</tr>
<tr>
<td>method</td>
<td>N</td>
<td>默认的是“aes-256-cfb”，一般 <em>保持默认</em> 即可</td>
</tr>
<tr>
<td>fast_open</td>
<td>N</td>
<td>使用<a href="https://github.com/shadowsocks/shadowsocks/wiki/TCP-Fast-Open" target="_blank" rel="noopener">TCP_FASTOPEN</a>, 参数选项 true / false，一般 <em>保持默认</em> 即可</td>
</tr>
<tr>
<td>workers</td>
<td>N</td>
<td>worker的数量, 在 Unix/Linux 上有效，一般不用加此项</td>
</tr>
</tbody>
</table>
<p>最后，启动 Shadowsocks，在命令行中输入以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssserver -c [path/to/config] -d start</div></pre></td></tr></table></figure>
<p>即可启动 Shadowsocks 服务；如果要关闭 Shadowsocks 服务，在命令行中输入以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssserver -c [path/to/config] -d stop</div></pre></td></tr></table></figure>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://shadowsocks.org/en/index.html" target="_blank" rel="noopener">Shadowsocks官网</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mooncool.github.io/2017/09/08/shadowsocks/" data-id="cjcg9ph2y000h2eyrpngli35c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-term-dictionary-2017" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/09/term-dictionary-2017/" class="article-date">
  <time datetime="2017-08-09T15:47:20.000Z" itemprop="datePublished">2017-08-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/09/term-dictionary-2017/">门窗2017 术语-变量名对照表</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="门窗2017-术语对照表"><a href="#门窗2017-术语对照表" class="headerlink" title="门窗2017 术语对照表"></a>门窗2017 术语对照表</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>数据库字段用下划线分割，代码中的变量名用小驼峰</li>
<li>IDE 工具统一设置为 UTF-8 编码，Unix 换行符(LF)</li>
<li>每个文件的末尾，必须多一个空行</li>
<li>返回值是时间的，命名以 <code>_at</code> 结尾，类型为时间戳，例如：<br><code>created_at: 1503286189075</code></li>
<li>返回值是日期的，命名以 <code>_date</code> 结尾，类型为日期，例如：<br><code>submited_date: &#39;2017-08-09&#39;</code></li>
<li>数据库字段以下划线 <code>_</code> 分割</li>
<li>对于数组形式的变量，命名为 <code>xxxList</code>，如：<code>userList</code>，<code>orderList</code></li>
<li>对于 hashMap 形式的变量，命名为 <code>xxxMap</code>，如：<code>warehouseMap</code>，<code>catalogMap</code></li>
</ul>
<h2 id="单据类"><a href="#单据类" class="headerlink" title="单据类"></a>单据类</h2><table>
<thead>
<tr>
<th>术语</th>
<th>变量名</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>方案</td>
<td>plan / solution</td>
<td>终端顾客的需求</td>
</tr>
<tr>
<td>合同号</td>
<td>groupCode</td>
<td></td>
</tr>
<tr>
<td>意向单 / 合同</td>
<td>orderGroup</td>
<td>未付款的订单，包含了一组订单</td>
</tr>
<tr>
<td>订单</td>
<td>order</td>
<td>终端顾客付款后的订单</td>
</tr>
<tr>
<td>材料销售单</td>
<td>salesOrder</td>
<td></td>
</tr>
<tr>
<td>材料采购单</td>
<td>purchaseOrder</td>
<td></td>
</tr>
<tr>
<td>材料生产单</td>
<td>manufactureOrder</td>
<td></td>
</tr>
<tr>
<td>材料备料单</td>
<td>preOutboundOrder</td>
<td></td>
</tr>
<tr>
<td>材料领料单</td>
<td>outboundOrder</td>
<td></td>
</tr>
<tr>
<td>材料退料单</td>
<td>preInboundOrder</td>
<td></td>
</tr>
<tr>
<td>材料收货单</td>
<td>preInboundOrder</td>
<td></td>
</tr>
<tr>
<td>收款单</td>
<td>?</td>
<td></td>
</tr>
<tr>
<td>包裹</td>
<td>package</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="材料类"><a href="#材料类" class="headerlink" title="材料类"></a>材料类</h2><table>
<thead>
<tr>
<th>术语</th>
<th>变量名</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>分类</td>
<td>catalog</td>
<td></td>
</tr>
<tr>
<td>品牌</td>
<td>brand</td>
<td></td>
</tr>
<tr>
<td>系列</td>
<td>series</td>
<td></td>
</tr>
<tr>
<td>成品(门窗)</td>
<td>product</td>
<td></td>
</tr>
<tr>
<td>物料</td>
<td>material</td>
<td>材料</td>
</tr>
<tr>
<td>坯料 / 胚料</td>
<td>raw?</td>
<td></td>
</tr>
<tr>
<td>型材</td>
<td>bar</td>
<td></td>
</tr>
<tr>
<td>板材</td>
<td>panel</td>
<td></td>
</tr>
<tr>
<td>玻璃</td>
<td>glass</td>
<td></td>
</tr>
<tr>
<td>配件</td>
<td>accessory</td>
<td></td>
</tr>
<tr>
<td>面料</td>
<td>?</td>
<td></td>
</tr>
<tr>
<td>主材料</td>
<td>primaryMaterial</td>
<td></td>
</tr>
<tr>
<td>子材料</td>
<td>subMaterial</td>
<td></td>
</tr>
<tr>
<td>货位 / 仓位</td>
<td>position</td>
<td>物料摆放的位置</td>
</tr>
<tr>
<td>颜色</td>
<td>color</td>
<td></td>
</tr>
<tr>
<td>纸号</td>
<td>paperCode</td>
<td></td>
</tr>
<tr>
<td>色号</td>
<td>colorCode</td>
<td></td>
</tr>
<tr>
<td>粉号</td>
<td>powder</td>
<td></td>
</tr>
<tr>
<td>编号</td>
<td>code</td>
<td></td>
</tr>
<tr>
<td>名称</td>
<td>name</td>
<td></td>
</tr>
<tr>
<td>支长 / 长 / 长度</td>
<td>length</td>
<td></td>
</tr>
<tr>
<td>宽 / 宽度</td>
<td>width</td>
<td></td>
</tr>
<tr>
<td>高 / 高度</td>
<td>height</td>
<td></td>
</tr>
<tr>
<td>厚 / 厚度 / 壁厚</td>
<td>thickness</td>
<td></td>
</tr>
<tr>
<td>米重</td>
<td>meterWeight</td>
<td></td>
</tr>
<tr>
<td>密度</td>
<td>density</td>
<td></td>
</tr>
<tr>
<td>重量</td>
<td>weight</td>
<td></td>
</tr>
<tr>
<td>模具</td>
<td>mould</td>
<td></td>
</tr>
<tr>
<td>包装/包装规格</td>
<td>standard</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="用户角色、信息类"><a href="#用户角色、信息类" class="headerlink" title="用户角色、信息类"></a>用户角色、信息类</h2><table>
<thead>
<tr>
<th>术语</th>
<th>变量名</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>经销商</td>
<td>customer</td>
<td>门窗厂家的下游</td>
</tr>
<tr>
<td>(门窗)厂家</td>
<td>factory</td>
<td></td>
</tr>
<tr>
<td>员工</td>
<td>employee</td>
<td></td>
</tr>
<tr>
<td>终端顾客</td>
<td>buyer</td>
<td></td>
</tr>
<tr>
<td>仓库</td>
<td>warehouse</td>
<td></td>
</tr>
<tr>
<td>物流</td>
<td>logistics</td>
<td></td>
</tr>
<tr>
<td>供应商</td>
<td>supplier</td>
<td></td>
</tr>
<tr>
<td>部门</td>
<td>department</td>
<td></td>
</tr>
<tr>
<td>职位 / 职务</td>
<td>job</td>
<td></td>
</tr>
<tr>
<td>省</td>
<td>province</td>
<td></td>
</tr>
<tr>
<td>市</td>
<td>city</td>
<td></td>
</tr>
<tr>
<td>区 / 区域 / 县</td>
<td>district</td>
<td></td>
</tr>
<tr>
<td>乡镇</td>
<td>village</td>
<td></td>
</tr>
<tr>
<td>地址</td>
<td>address</td>
<td></td>
</tr>
<tr>
<td>头像</td>
<td>avatar</td>
<td></td>
</tr>
<tr>
<td>手机号</td>
<td>phone</td>
<td></td>
</tr>
<tr>
<td>座机号</td>
<td>tel</td>
<td></td>
</tr>
<tr>
<td>传真号</td>
<td>fax</td>
<td></td>
</tr>
<tr>
<td>联系人</td>
<td>contact</td>
<td></td>
</tr>
<tr>
<td>姓名</td>
<td>name</td>
<td></td>
</tr>
<tr>
<td>微信</td>
<td>wechat</td>
<td></td>
</tr>
<tr>
<td>QQ</td>
<td>qq</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="库存类"><a href="#库存类" class="headerlink" title="库存类"></a>库存类</h2><table>
<thead>
<tr>
<th>术语</th>
<th>变量名</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>入库</td>
<td>inbound</td>
<td></td>
</tr>
<tr>
<td>入库数量</td>
<td>inboundQuantity</td>
<td></td>
</tr>
<tr>
<td>出库</td>
<td>outbound</td>
<td></td>
</tr>
<tr>
<td>出库数量</td>
<td>outboundQuantity</td>
<td></td>
</tr>
<tr>
<td>盘存</td>
<td>inventory</td>
<td></td>
</tr>
<tr>
<td>盘存数量</td>
<td>inventoryQuantity</td>
<td></td>
</tr>
<tr>
<td>冻结入库数</td>
<td>frozenInboundQuantity</td>
<td></td>
</tr>
<tr>
<td>冻结出库数</td>
<td>frozenOutboundQuantity</td>
<td></td>
</tr>
<tr>
<td>采购车</td>
<td>purchaseCart</td>
<td></td>
</tr>
<tr>
<td>购物车</td>
<td>cart</td>
<td></td>
</tr>
<tr>
<td>计划收货日期</td>
<td>estiDeliveryAt</td>
<td></td>
</tr>
<tr>
<td>收货日期</td>
<td>deliveryAt</td>
<td></td>
</tr>
<tr>
<td>收货金额</td>
<td>originalPrice</td>
<td></td>
</tr>
<tr>
<td>采购收货单</td>
<td>receiptOrder</td>
<td></td>
</tr>
<tr>
<td>采购订货单</td>
<td>purchaseOrder</td>
<td></td>
</tr>
<tr>
<td>申购</td>
<td>request</td>
<td></td>
</tr>
<tr>
<td>申请人</td>
<td>creator</td>
<td></td>
</tr>
<tr>
<td>申请日期</td>
<td>createdAt</td>
<td></td>
</tr>
<tr>
<td>最高库存</td>
<td>maxQuantity</td>
<td></td>
</tr>
<tr>
<td>实际库存/库存/当前库存</td>
<td>quantity</td>
<td></td>
</tr>
<tr>
<td>安全库存/安全红线/最小库存</td>
<td>minQuantity</td>
<td></td>
</tr>
<tr>
<td>待入库</td>
<td>preInbound</td>
<td></td>
</tr>
<tr>
<td>补货/备货/备料</td>
<td>preOutbound</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="财务类"><a href="#财务类" class="headerlink" title="财务类"></a>财务类</h2><table>
<thead>
<tr>
<th>术语</th>
<th>变量名</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>总价 / 应收款</td>
<td>totalPrice</td>
<td>单价*数量*折扣 的总和 + 税费 - 优惠 - 积分(返点)</td>
</tr>
<tr>
<td>定金 / 保证金</td>
<td>deposit</td>
<td></td>
</tr>
<tr>
<td>尾款</td>
<td>leftPrice</td>
<td>应收款 - 已收款</td>
</tr>
<tr>
<td>原价 / 总金额</td>
<td>originalPrice</td>
<td></td>
</tr>
<tr>
<td>积分</td>
<td>score</td>
<td></td>
</tr>
<tr>
<td>返点</td>
<td>rebate?</td>
<td></td>
</tr>
<tr>
<td>税点</td>
<td>taxRatio</td>
<td></td>
</tr>
<tr>
<td>税费</td>
<td>taxFee</td>
<td></td>
</tr>
<tr>
<td>账户余额 / 钱包</td>
<td>wallet</td>
<td></td>
</tr>
<tr>
<td>银行卡</td>
<td>bankCard</td>
<td></td>
</tr>
<tr>
<td>付款方式</td>
<td>payment</td>
<td></td>
</tr>
<tr>
<td>财务</td>
<td>finance</td>
<td></td>
</tr>
<tr>
<td>优惠</td>
<td>discount</td>
<td></td>
</tr>
<tr>
<td>支付宝</td>
<td>alipay</td>
<td></td>
</tr>
<tr>
<td>零售价/单价</td>
<td>price</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="生产类"><a href="#生产类" class="headerlink" title="生产类"></a>生产类</h2><table>
<thead>
<tr>
<th>术语</th>
<th>变量名</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>生产计划</td>
<td>?</td>
<td></td>
</tr>
<tr>
<td>流程</td>
<td>process</td>
<td></td>
</tr>
<tr>
<td>环节</td>
<td>step</td>
<td></td>
</tr>
<tr>
<td>工作组</td>
<td>workgroup</td>
<td></td>
</tr>
<tr>
<td>套餐</td>
<td>predefinedStepList</td>
<td></td>
</tr>
<tr>
<td>未安排生产单</td>
<td>unassigned</td>
<td></td>
</tr>
<tr>
<td>已安排生产单</td>
<td>assigned</td>
<td></td>
</tr>
<tr>
<td>作色</td>
<td>painting</td>
<td></td>
</tr>
<tr>
<td>穿条</td>
<td>combine</td>
<td></td>
</tr>
<tr>
<td>计划时间</td>
<td>estiStartAt</td>
<td></td>
</tr>
<tr>
<td>交货日期</td>
<td>completeAt</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="采购申购类"><a href="#采购申购类" class="headerlink" title="采购申购类"></a>采购申购类</h2><table>
<thead>
<tr>
<th>术语</th>
<th>变量名</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><table>
<thead>
<tr>
<th>术语</th>
<th>变量名</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>打印模版</td>
<td>template</td>
<td></td>
</tr>
<tr>
<td>优先级</td>
<td>priority</td>
<td></td>
</tr>
<tr>
<td>备注</td>
<td>remark</td>
<td></td>
</tr>
<tr>
<td>助记码</td>
<td>fastCode</td>
<td></td>
</tr>
<tr>
<td>设置</td>
<td>setting</td>
<td></td>
</tr>
<tr>
<td>编辑</td>
<td>edit</td>
<td></td>
</tr>
<tr>
<td>权限</td>
<td>authority</td>
<td></td>
</tr>
<tr>
<td>分页</td>
<td>pagination</td>
<td></td>
</tr>
<tr>
<td>当前页码</td>
<td>page</td>
<td></td>
</tr>
<tr>
<td>每页条数</td>
<td>perPage</td>
<td></td>
</tr>
<tr>
<td>收货地址</td>
<td>address</td>
<td></td>
</tr>
<tr>
<td>实付金额</td>
<td>price</td>
<td></td>
</tr>
<tr>
<td>审核人</td>
<td>checker</td>
<td></td>
</tr>
<tr>
<td>批准人</td>
<td>reChecker</td>
<td></td>
</tr>
<tr>
<td>退料人/领料人</td>
<td>operator</td>
<td></td>
</tr>
<tr>
<td>录单人</td>
<td>creator</td>
<td></td>
</tr>
<tr>
<td>已收金额</td>
<td>receivedPrice</td>
<td></td>
</tr>
<tr>
<td>收货人</td>
<td>receiver</td>
<td></td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mooncool.github.io/2017/08/09/term-dictionary-2017/" data-id="cjcg9ph37000s2eyrnw9mxuxx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码规范/">代码规范</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-rest-api-design-guide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/27/rest-api-design-guide/" class="article-date">
  <time datetime="2017-07-27T15:32:05.000Z" itemprop="datePublished">2017-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/27/rest-api-design-guide/">RESTFUL API 设计规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="RESTFUL-API-设计规范"><a href="#RESTFUL-API-设计规范" class="headerlink" title="RESTFUL API 设计规范"></a>RESTFUL API 设计规范</h1><!-- ## 目录 -->
<h2 id="URI定义"><a href="#URI定义" class="headerlink" title="URI定义"></a>URI定义</h2><ul>
<li>应该将API部署在专用域名之下</li>
<li>不用大写</li>
<li>用中杠(-)不用下杠(_)</li>
<li>参数列表要 encode</li>
<li>URI中不应该出现动词，动词应该使用HTTP方法表示</li>
<li>URI中的名词表示资源集合，使用复数形式</li>
<li>虽然/在URI中表达层级，但是避免为了追求REST导致层级过深，适当使用参数表示<br><code>GET /comments/tid?tid=1&amp;page=1</code></li>
</ul>
<h2 id="HTTP请求方法"><a href="#HTTP请求方法" class="headerlink" title="HTTP请求方法"></a>HTTP请求方法</h2><table>
<thead>
<tr>
<th>请求方法</th>
<th>含义</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>DELETE</td>
<td>删除资源</td>
<td></td>
</tr>
<tr>
<td>GET</td>
<td>查询资源</td>
<td></td>
</tr>
<tr>
<td>PATCH</td>
<td>?</td>
<td></td>
</tr>
<tr>
<td>POST</td>
<td>创建资源</td>
<td></td>
</tr>
<tr>
<td>PUT</td>
<td>更新资源</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="响应格式"><a href="#响应格式" class="headerlink" title="响应格式"></a>响应格式</h2><ul>
<li>采用 JSON，不要使用 XML</li>
<li>默认情况下 JSON 外层不需要嵌套大括号，API 需要支持JSONP跨域访问或者客户端无法访问 HTTP header 才需要加上嵌套大括号</li>
<li>响应原则上采用dingo默认的返回格式</li>
<li><p>正确的响应，包含 data 和 meta(仅当返回列表数据) 信息</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"data"</span>: &#123;&#125;,</div><div class="line">    <span class="attr">"meta"</span>: &#123;</div><div class="line">        <span class="attr">"pagination"</span>: &#123;</div><div class="line">            <span class="attr">"per_page"</span>: <span class="number">10</span>,</div><div class="line">            <span class="attr">"total"</span>: <span class="number">80</span>,</div><div class="line">            <span class="attr">"total_page"</span>: <span class="number">8</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>错误信息必须包含 <code>status</code>、<code>message</code>，2个部分</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"status_code"</span>: <span class="number">500</span>,</div><div class="line">    <span class="attr">"message"</span>: <span class="string">"Internal Error"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>默认情况下不要过滤 API 输出中的空格，并且要支持 gzip</p>
</li>
</ul>
<h2 id="常见HTTP响应码及含义"><a href="#常见HTTP响应码及含义" class="headerlink" title="常见HTTP响应码及含义"></a>常见HTTP响应码及含义</h2><table>
<thead>
<tr>
<th>响应码</th>
<th>含义</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>对成功的 GET、PUT、PATCH 或 DELETE 操作进行响应。也可以被用在不创建新资源的 POST 操作上</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
<td>对创建新资源的POST操作进行响应。应该带着指向新资源地址的 Location header</td>
</tr>
<tr>
<td>204</td>
<td>No Content</td>
<td>对不会返回响应体的成功请求进行响应(比如 <em>DELETE</em> 请求)</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified</td>
<td>HTTP缓存 header 生效的时候用</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>请求异常，比如请求中的 body 无法解析</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>没有进行认证或者认证非法。当 API 通过浏览器访问的时候，可以用来弹出一个认证对话框</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>当认证成功，但是认证过的用户没有访问资源的权限</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>请求资源不存在</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
<td>所请求的HTTP方法不允许当前认证用户访问</td>
</tr>
<tr>
<td>410</td>
<td>Gone</td>
<td>表示当前请求的资源不再可用。当调用老版本API的时候很有用</td>
</tr>
<tr>
<td>415</td>
<td>Unsupported Media Type</td>
<td>如果请求中的内容类型是错误的</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessable Entity</td>
<td>用来表示校验错误</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests</td>
<td>由于请求频次达到上限而被拒绝访问</td>
</tr>
<tr>
<td>500</td>
<td>Internal Error</td>
<td>服务器内部错误</td>
</tr>
</tbody>
</table>
<h2 id="认证"><a href="#认证" class="headerlink" title="认证"></a>认证</h2><p>RESTful API应该是无状态。这意味着对请求的认证不应该基于 cookie 或者 session。相反，每个请求应该带有一些认证凭证。</p>
<p>如果一直使用 SSL，认证凭证可以简单的使用随机生成的 access token，把其做为 HTTP Basic Auth 中 user name 字段的值传给 API。<br>这么做的好处是可以通过浏览器访问 - 如果浏览器从服务器收到 401 Unauthorized 状态码，它将会弹出一个对话框让人输出认证凭证。</p>
<p>当然，这种基于 token 来进行基本认证的方法只能当用户从 API 管理后台拷贝了一个 token 到自己的代码中才行。<br>如果搞不到 token，只能使用 OAuth 2 来把安全 token 传递给第三方。OAuth 2 使用 Bearer token，并且也是基于SSL来保证传输安全。</p>
<p>支持 JSONP 的 API 可能需要第三种方法来实现认证，因为 JSONP 的请求没法发送 HTTP Basic Auth 凭证或者 Bearer token。<br>这种情况下，可以使用一个额外的查询参数 access_token。<br>注意：使用查询参数来传递 token 存在一个固有的安全隐患，因为大多数 web 服务器会在服务器日志中保存查询参数。</p>
<p>不管怎么样，以上三种方法是用来在 API 之间传输 token 的方法。实际传输的 token 可以是一样的。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mooncool.github.io/2017/07/27/rest-api-design-guide/" data-id="cjcg9ph30000j2eyr9bqtgapq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码规范/">代码规范</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-best-practices" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/21/best-practices/" class="article-date">
  <time datetime="2017-05-21T14:08:19.000Z" itemprop="datePublished">2017-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/21/best-practices/">代码最佳实践</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>以下是收集的代码最佳实践规范</p>
<p><a href="http://sass-lang.com/documentation/" target="_blank" rel="noopener">SASS最佳实践</a></p>
<p><a href="https://github.com/johnpapa/angular-styleguide/blob/master/a1/README.md" target="_blank" rel="noopener">Angular 1最佳实践</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mooncool.github.io/2017/05/21/best-practices/" data-id="cjcg9ph2h00002eyrhv43y9sq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-javascript-style-guide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/19/javascript-style-guide/" class="article-date">
  <time datetime="2017-05-19T03:51:03.000Z" itemprop="datePublished">2017-05-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/19/javascript-style-guide/">Javascript代码规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>JavaScript在新格尔一直有着广泛的应用，特别是在浏览器端的行为管理。本文档的目标是使JavaScript代码风格保持一致，容易被理解和被维护。<br>虽然本文档是针对JavaScript设计的，但是在使用各种JavaScript的预编译语言时(如TypeScript等)时，适用的部分也应尽量遵循本文档的约定。<br>任何问题或建议，欢迎跟我们讨论:zhujian@cshen.cn。</p>
<h1 id="代码风格"><a href="#代码风格" class="headerlink" title="代码风格"></a>代码风格</h1><h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><p><strong>[建议]</strong> JavaScript 文件使用无 BOM 的 UTF-8 编码。</p>
<p><strong>解释</strong><br>UTF-8 编码具有更广泛的适应性。BOM 在使用程序或工具处理文件时可能造成不必要的干扰。</p>
<hr>
<p><strong>[建议]</strong> 在文件结尾处，保留一个空行。</p>
<h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><h3 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h3><p><strong>[强制]</strong> [RULE003] 使用 4 个空格做为一个缩进层级，不允许使用 2 个空格 或 tab 字符。</p>
<hr>
<p><strong>[强制]</strong> switch 下的 case 和 default 必须增加一个缩进层级。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"></div><div class="line"><span class="keyword">switch</span> (variable) &#123;</div><div class="line"></div><div class="line">    <span class="keyword">case</span> <span class="string">'1'</span>:</div><div class="line">        <span class="comment">// do...</span></div><div class="line">        <span class="keyword">break</span>;</div><div class="line"></div><div class="line">    <span class="keyword">case</span> <span class="string">'2'</span>:</div><div class="line">        <span class="comment">// do...</span></div><div class="line">        <span class="keyword">break</span>;</div><div class="line"></div><div class="line">    <span class="keyword">default</span>:</div><div class="line">        <span class="comment">// do...</span></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">switch</span> (variable) &#123;</div><div class="line"></div><div class="line"><span class="keyword">case</span> <span class="string">'1'</span>:</div><div class="line">    <span class="comment">// do...</span></div><div class="line">    <span class="keyword">break</span>;</div><div class="line"></div><div class="line"><span class="keyword">case</span> <span class="string">'2'</span>:</div><div class="line">    <span class="comment">// do...</span></div><div class="line">    <span class="keyword">break</span>;</div><div class="line"></div><div class="line"><span class="keyword">default</span>:</div><div class="line">    <span class="comment">// do...</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h3><p><strong>[强制]</strong> [RULE005] 二元运算符两侧必须有一个空格，一元运算符与操作对象之间不允许有空格。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = !arr.length;</div><div class="line">a++;</div><div class="line">a = b + c;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE006] 用作代码块起始的左花括号 { 前必须有一个空格。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (condition) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">while</span> (condition) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (condition)&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">while</span> (condition)&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcName</span>(<span class="params"></span>)</span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE007] if / else / for / while / function / switch / do / try / catch / finally 关键字后，必须有一个空格。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (condition) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">while</span> (condition) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span>(condition) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">while</span>(condition) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE008] 在对象创建时，属性中的 : 之后必须有空格，: 之前不允许有空格。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    a: <span class="number">1</span>,</div><div class="line">    b: <span class="number">2</span>,</div><div class="line">    c: <span class="number">3</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    a : <span class="number">1</span>,</div><div class="line">    b:<span class="number">2</span>,</div><div class="line">    c :<span class="number">3</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE009] 函数声明、具名函数表达式、函数调用中，函数名和 ( 之间不允许有空格。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> funcName = <span class="function"><span class="keyword">function</span> <span class="title">funcName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">funcName();</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcName</span> (<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> funcName = <span class="function"><span class="keyword">function</span> <span class="title">funcName</span> (<span class="params"></span>) </span>&#123;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">funcName ();</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> , 和 ; 前不允许有空格。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line">callFunc(a, b);</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">callFunc(a , b) ;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 在函数调用、函数声明、括号表达式、属性访问、if / for / while / switch / catch 等语句中，() 和 [] 内紧贴括号部分不允许有空格。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"></div><div class="line">callFunc(param1, param2, param3);</div><div class="line"></div><div class="line">save(<span class="keyword">this</span>.list[<span class="keyword">this</span>.indexes[i]]);</div><div class="line"></div><div class="line">needIncream &amp;&amp; (variable += increament);</div><div class="line"></div><div class="line"><span class="keyword">if</span> (num &gt; list.length) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">while</span> (len--) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"></div><div class="line">callFunc( param1, param2, param3 );</div><div class="line"></div><div class="line">save( <span class="keyword">this</span>.list[ <span class="keyword">this</span>.indexes[ i ] ] );</div><div class="line"></div><div class="line">needIncreament &amp;&amp; ( variable += increament );</div><div class="line"></div><div class="line"><span class="keyword">if</span> ( num &gt; list.length ) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">while</span> ( len-- ) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE012] 单行声明的数组与对象，如果包含元素，{} 和 [] 内紧贴括号部分不允许包含空格。</p>
<p><strong>解释</strong><br>声明包含元素的数组与对象，只有当内部元素的形式较为简单时，才允许写在一行。元素复杂的情况，还是应该换行书写。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">var</span> arr1 = [];</div><div class="line"><span class="keyword">var</span> arr2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line"><span class="keyword">var</span> obj1 = &#123;&#125;;</div><div class="line"><span class="keyword">var</span> obj2 = &#123;<span class="attr">name</span>: <span class="string">'obj'</span>&#125;;</div><div class="line"><span class="keyword">var</span> obj3 = &#123;</div><div class="line">    name: <span class="string">'obj'</span>,</div><div class="line">    age: <span class="number">20</span>,</div><div class="line">    sex: <span class="number">1</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> arr1 = [ ];</div><div class="line"><span class="keyword">var</span> arr2 = [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ];</div><div class="line"><span class="keyword">var</span> obj1 = &#123; &#125;;</div><div class="line"><span class="keyword">var</span> obj2 = &#123; <span class="attr">name</span>: <span class="string">'obj'</span> &#125;;</div><div class="line"><span class="keyword">var</span> obj3 = &#123;<span class="attr">name</span>: <span class="string">'obj'</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">sex</span>: <span class="number">1</span>&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE013] 行尾不得有多余的空格。</p>
<h3 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h3><p><strong>[强制]</strong> 每个独立语句结束后必须换行。</p>
<hr>
<p><strong>[强制]</strong> [RULE015] 每行不得超过 120 个字符。</p>
<p><strong>解释</strong><br>超长的不可分割的代码允许例外，比如复杂的正则表达式。长字符串不在例外之列。</p>
<hr>
<p><strong>[强制]</strong> 运算符处换行时，运算符必须在新行的行首。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (user.isAuthenticated()</div><div class="line">    &amp;&amp; user.isInRole(<span class="string">'admin'</span>)</div><div class="line">    &amp;&amp; user.hasAuthority(<span class="string">'add-admin'</span>)</div><div class="line">    || user.hasAuthority(<span class="string">'delete-admin'</span>)</div><div class="line">) &#123;</div><div class="line">    <span class="comment">// Code</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> result = number1 + number2 + number3</div><div class="line">    + number4 + number5;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (user.isAuthenticated() &amp;&amp;</div><div class="line">    user.isInRole(<span class="string">'admin'</span>) &amp;&amp;</div><div class="line">    user.hasAuthority(<span class="string">'add-admin'</span>) ||</div><div class="line">    user.hasAuthority(<span class="string">'delete-admin'</span>)) &#123;</div><div class="line">    <span class="comment">// Code</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> result = number1 + number2 + number3 +</div><div class="line">    number4 + number5;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE017] 在函数声明、函数表达式、函数调用、对象创建、数组创建、for语句等场景中，不允许在 , 或 ; 前换行。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    a: <span class="number">1</span>,</div><div class="line">    b: <span class="number">2</span>,</div><div class="line">    c: <span class="number">3</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">foo(</div><div class="line">    aVeryVeryLongArgument,</div><div class="line">    anotherVeryLongArgument,</div><div class="line">    callback</div><div class="line">);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    a: <span class="number">1</span></div><div class="line">    , <span class="attr">b</span>: <span class="number">2</span></div><div class="line">    , <span class="attr">c</span>: <span class="number">3</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">foo(</div><div class="line">    aVeryVeryLongArgument</div><div class="line">    , anotherVeryLongArgument</div><div class="line">    , callback</div><div class="line">);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 不同行为或逻辑的语句集，使用空行隔开，更易阅读。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 仅为按逻辑换行的示例，不代表setStyle的最优实现</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setStyle</span>(<span class="params">element, property, value</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (element == <span class="literal">null</span>) &#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    element.style[property] = value;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 在语句的行长度超过 120 时，根据逻辑条件合理缩进。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 较复杂的逻辑条件组合，将每个条件独立一行，逻辑运算符放置在行首进行分隔，或将部分逻辑按逻辑组合进行分隔。</span></div><div class="line"><span class="comment">// 建议最终将右括号 ) 与左大括号 &#123; 放在独立一行，保证与 if 内语句块能容易视觉辨识。</span></div><div class="line"><span class="keyword">if</span> (user.isAuthenticated()</div><div class="line">    &amp;&amp; user.isInRole(<span class="string">'admin'</span>)</div><div class="line">    &amp;&amp; user.hasAuthority(<span class="string">'add-admin'</span>)</div><div class="line">    || user.hasAuthority(<span class="string">'delete-admin'</span>)</div><div class="line">) &#123;</div><div class="line">    <span class="comment">// Code</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 按一定长度截断字符串，并使用 + 运算符进行连接。</span></div><div class="line"><span class="comment">// 分隔字符串尽量按语义进行，如不要在一个完整的名词中间断开。</span></div><div class="line"><span class="comment">// 特别的，对于HTML片段的拼接，通过缩进，保持和HTML相同的结构。</span></div><div class="line"><span class="keyword">var</span> html = <span class="string">''</span> <span class="comment">// 此处用一个空字符串，以便整个HTML片段都在新行严格对齐</span></div><div class="line">    + <span class="string">'&lt;article&gt;'</span></div><div class="line">    +     <span class="string">'&lt;h1&gt;Title here&lt;/h1&gt;'</span></div><div class="line">    +     <span class="string">'&lt;p&gt;This is a paragraph&lt;/p&gt;'</span></div><div class="line">    +     <span class="string">'&lt;footer&gt;Complete&lt;/footer&gt;'</span></div><div class="line">    + <span class="string">'&lt;/article&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// 也可使用数组来进行拼接，相对 + 更容易调整缩进。</span></div><div class="line"><span class="keyword">var</span> html = [</div><div class="line">    <span class="string">'&lt;article&gt;'</span>,</div><div class="line">        <span class="string">'&lt;h1&gt;Title here&lt;/h1&gt;'</span>,</div><div class="line">        <span class="string">'&lt;p&gt;This is a paragraph&lt;/p&gt;'</span>,</div><div class="line">        <span class="string">'&lt;footer&gt;Complete&lt;/footer&gt;'</span>,</div><div class="line">    <span class="string">'&lt;/article&gt;'</span></div><div class="line">];</div><div class="line">html = html.join(<span class="string">''</span>);</div><div class="line"></div><div class="line"><span class="comment">// 当参数过多时，将每个参数独立写在一行上，并将结束的右括号 ) 独立一行。</span></div><div class="line"><span class="comment">// 所有参数必须增加一个缩进。</span></div><div class="line">foo(</div><div class="line">    aVeryVeryLongArgument,</div><div class="line">    anotherVeryLongArgument,</div><div class="line">    callback</div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">// 也可以按逻辑对参数进行组合。</span></div><div class="line"><span class="comment">// 最经典的是baidu.format函数，调用时将参数分为“模板”和“数据”两块</span></div><div class="line">baidu.format(</div><div class="line">    dateFormatTemplate,</div><div class="line">    year, month, date, hour, minute, second</div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">// 当函数调用时，如果有一个或以上参数跨越多行，应当每一个参数独立一行。</span></div><div class="line"><span class="comment">// 这通常出现在匿名函数或者对象初始化等作为参数时，如setTimeout函数等。</span></div><div class="line">setTimeout(</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        alert(<span class="string">'hello'</span>);</div><div class="line">    &#125;,</div><div class="line">    <span class="number">200</span></div><div class="line">);</div><div class="line"></div><div class="line">order.data.read(</div><div class="line">    <span class="string">'id='</span> + me.model.id,</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">        me.attchToModel(data.result);</div><div class="line">        callback();</div><div class="line">    &#125;,</div><div class="line">    <span class="number">300</span></div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">// 链式调用较长时采用缩进进行调整。</span></div><div class="line">$(<span class="string">'#items'</span>)</div><div class="line">    .find(<span class="string">'.selected'</span>)</div><div class="line">    .highlight()</div><div class="line">    .end();</div><div class="line"></div><div class="line"><span class="comment">// 三元运算符由3部分组成，因此其换行应当根据每个部分的长度不同，形成不同的情况。</span></div><div class="line"><span class="keyword">var</span> result = thisIsAVeryVeryLongCondition</div><div class="line">    ? resultA : resultB;</div><div class="line"></div><div class="line"><span class="keyword">var</span> result = condition</div><div class="line">    ? thisIsAVeryVeryLongResult</div><div class="line">    : resultB;</div><div class="line"></div><div class="line"><span class="comment">// 数组和对象初始化的混用，严格按照每个对象的 &#123; 和结束 &#125; 在独立一行的风格书写。</span></div><div class="line"><span class="keyword">var</span> array = [</div><div class="line">    &#123;</div><div class="line">        <span class="comment">// ...</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line">];</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 对于 if…else… 、 try…catch…finally 等语句，推荐使用在 } 号后添加一个换行 的风格，使代码层次结构更清晰，阅读性更好。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (condition) &#123;</div><div class="line">    <span class="comment">// some statements;</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// some statements;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    <span class="comment">// some statements;</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> (ex) &#123;</div><div class="line">    <span class="comment">// some statements;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h3><p><strong>[强制]</strong> [RULE021] 不得省略语句结束的分号。</p>
<p><strong>[强制]</strong> [RULE022] 在 if / else / for / do / while 语句中，即使只有一行，也不得省略块 {…}。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (condition) &#123;</div><div class="line">    callFunc();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (condition) callFunc();</div><div class="line"><span class="keyword">if</span> (condition)</div><div class="line">    callFunc();</div><div class="line">·[强制] [RULE023] 函数定义结束不允许添加分号。</div><div class="line">示例</div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 如果是函数表达式，分号是不允许省略的。</span></div><div class="line"><span class="keyword">var</span> funcName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE024] IIFE 必须在函数表达式外添加 (，非 IIFE 不得在函数表达式外添加 ( 。</p>
<p><strong>解释</strong><br>额外的 ( 能够让代码在阅读的一开始就能判断函数是否立即被调用，进而明白接下来代码的用途。而不是一直拖到底部才恍然大悟。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">var</span> task = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="comment">// Code</span></div><div class="line">   <span class="keyword">return</span> result;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> task = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// Code</span></div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;();</div><div class="line"></div><div class="line"><span class="keyword">var</span> func = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h2><p><strong>[强制]</strong> 变量 使用 Camel命名法 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> loadingModules = &#123;&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 常量 使用 全部字母大写，单词间下划线分隔 的命名方式。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> HTML_ENTITY = &#123;&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 函数 使用 Camel命名法 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">stringFormat</span>(<span class="params">source</span>) </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 函数的 参数 使用 Camel命名法 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hear</span>(<span class="params">theBells</span>) </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE029] 类 使用 Pascal命名法 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">TextNode</span>(<span class="params">options</span>) </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE025] 类的 方法 / 属性 使用 Camel命名法 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">TextNode</span>(<span class="params">value, engine</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.value = value;</div><div class="line">    <span class="keyword">this</span>.engine = engine;</div><div class="line">&#125;</div><div class="line"></div><div class="line">TextNode.prototype.clone = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 枚举变量 使用 Pascal命名法 ，枚举的属性 使用 全部字母大写，单词间下划线分隔 的命名方式。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> TargetState = &#123;</div><div class="line">    READING: <span class="number">1</span>,</div><div class="line">    READED: <span class="number">2</span>,</div><div class="line">    APPLIED: <span class="number">3</span>,</div><div class="line">    READY: <span class="number">4</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 命名空间 使用 Camel命名法 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">equipments.heavyWeapons = &#123;&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 由多个单词组成的缩写词，在命名中，根据当前命名法和出现的位置，所有字母的大小写与首字母的大小写保持一致。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">XMLParser</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertHTML</span>(<span class="params">element, html</span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> httpRequest = <span class="keyword">new</span> HTTPRequest();</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 类名 使用 名词 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Engine</span>(<span class="params">options</span>) </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 函数名 使用 动宾短语 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">element</span>) </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> boolean 类型的变量使用 is 或 has 开头。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> isReady = <span class="literal">false</span>;</div><div class="line"><span class="keyword">var</span> hasMoreCommands = <span class="literal">false</span>;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> Promise对象 用 动宾短语的进行时 表达。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> loadingData = ajax.get(<span class="string">'url'</span>);</div><div class="line">loadingData.then(callback);</div></pre></td></tr></table></figure></p>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><h3 id="单行注释"><a href="#单行注释" class="headerlink" title="单行注释"></a>单行注释</h3><p><strong>[强制]</strong> [RULE038] 必须独占一行。// 后跟一个空格，缩进与下一行被注释说明的代码一致。</p>
<h3 id="多行注释"><a href="#多行注释" class="headerlink" title="多行注释"></a>多行注释</h3><p><strong>[建议]</strong> 避免使用 /<em>…</em>/ 这样的多行注释。有多行注释内容时，使用多个单行注释。</p>
<h3 id="文档化注释"><a href="#文档化注释" class="headerlink" title="文档化注释"></a>文档化注释</h3><p><strong>[强制]</strong> 为了便于代码阅读和自文档化，以下内容必须包含以 /<em>*…</em>/ 形式的块注释中。</p>
<p><strong>解释</strong></p>
<ol>
<li>文件</li>
<li>namespace</li>
<li>类</li>
<li>函数或方法</li>
<li>类属性</li>
<li>事件</li>
<li>全局变量</li>
<li>常量</li>
<li>AMD 模块</li>
</ol>
<hr>
<p><strong>[强制]</strong> 文档注释前必须空一行。</p>
<hr>
<p><strong>[建议]</strong> 自文档化的文档说明 what，而不是 how。</p>
<h3 id="类型定义"><a href="#类型定义" class="headerlink" title="类型定义"></a>类型定义</h3><p><strong>[强制]</strong> 类型定义都是以 { 开始, 以 } 结束。</p>
<p><strong>解释</strong><br>常用类型如：{string}, {number}, {boolean}, {Object}, {Function}, {RegExp}, {Array}, {Date}。<br>类型不仅局限于内置的类型，也可以是自定义的类型。比如定义了一个类 Developer，就可以使用它来定义一个参数和返回值的类型。</p>
<hr>
<p><strong>[强制]</strong> 对于基本类型 {string}, {number}, {boolean}，首字母必须小写。</p>
<p><strong>类型定义</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">语法示例</div><div class="line">解释</div><div class="line">String</div><div class="line">&#123;string&#125;</div><div class="line">–</div><div class="line">Number</div><div class="line">&#123;number&#125;</div><div class="line">–</div><div class="line">Boolean</div><div class="line">&#123;boolean&#125;</div><div class="line">–</div><div class="line">Object</div><div class="line">&#123;Object&#125;</div><div class="line">–</div><div class="line">Function</div><div class="line">&#123;Function&#125;</div><div class="line">–</div><div class="line">RegExp</div><div class="line">&#123;RegExp&#125;</div><div class="line">–</div><div class="line">Array</div><div class="line">&#123;Array&#125;</div><div class="line">–</div><div class="line">Date</div><div class="line">&#123;Date&#125;</div><div class="line">–</div><div class="line">单一类型集合</div><div class="line">&#123;Array.&lt;string&gt;&#125;</div><div class="line">string 类型的数组</div><div class="line">多类型</div><div class="line">&#123;(number｜boolean)&#125;</div><div class="line">可能是 number 类型, 也可能是 boolean 类型</div><div class="line">允许为null</div><div class="line">&#123;?number&#125;</div><div class="line">可能是 number, 也可能是 null</div><div class="line">不允许为null</div><div class="line">&#123;!Object&#125;</div><div class="line">Object 类型, 但不是 null</div><div class="line">Function类型</div><div class="line">&#123;function(number, boolean)&#125;</div><div class="line">函数, 形参类型</div><div class="line">Function带返回值</div><div class="line">&#123;function(number, boolean):string&#125;</div><div class="line">函数, 形参, 返回值类型</div><div class="line">参数可选</div><div class="line">@param &#123;string=&#125; name</div><div class="line">可选参数, =为类型后缀</div><div class="line">可变参数</div><div class="line">@param &#123;...number&#125; args</div><div class="line">变长参数, ...为类型前缀</div><div class="line">任意类型</div><div class="line">&#123;*&#125;</div><div class="line">任意类型</div><div class="line">可选任意类型</div><div class="line">@param &#123;*=&#125; name</div><div class="line">可选参数，类型不限</div><div class="line">可变任意类型</div><div class="line">@param &#123;...*&#125; args</div><div class="line">变长参数，类型不限</div></pre></td></tr></table></figure>
<h3 id="文件注释"><a href="#文件注释" class="headerlink" title="文件注释"></a>文件注释</h3><p><strong>[强制]</strong> 文件顶部必须包含文件注释，用 @file 标识文件说明。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * @file Describe the file</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 文件注释中可以用 @author 标识开发者信息。</p>
<p><strong>解释</strong><br>开发者信息能够体现开发人员对文件的贡献，并且能够让遇到问题或希望了解相关信息的人找到维护人。通常情况文件在被创建时标识的是创建者。<br>随着项目的进展，越来越多的人加入，参与这个文件的开发，新的作者应该被加入 @author 标识。<br>@author 标识具有多人时，原则是按照 责任 进行排序。通常的说就是如果有问题，就是找第一个人应该比找第二个人有效。<br>比如文件的创建者由于各种原因，模块移交给了其他人或其他团队，后来因为新增需求，其他人在新增代码时，添加 @author 标识应该把自己的名字添加在创建人的前面。<br>@author 中的名字不允许被删除。任何劳动成果都应该被尊重。<br>业务项目中，一个文件可能被多人频繁修改，并且每个人的维护时间都可能不会很长，不建议为文件增加 @author 标识。通过版本控制系统追踪变更，按业务逻辑单元确定模块的维护责任人，通过文档与wiki跟踪和查询，是更好的责任管理方式。<br>对于业务逻辑无关的技术型基础项目，特别是开源的公共项目，应使用 @author 标识。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * @file Describe the file</span></div><div class="line"><span class="comment"> * @author author-name(mail-name@domain.com)</span></div><div class="line"><span class="comment"> *         author-name2(mail-name2@domain.com)</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure></p>
<h3 id="命名空间注释"><a href="#命名空间注释" class="headerlink" title="命名空间注释"></a>命名空间注释</h3><p><strong>[建议]</strong> 命名空间使用 @namespace 标识。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * @namespace</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">var</span> util = &#123;&#125;;</div></pre></td></tr></table></figure></p>
<h3 id="类注释"><a href="#类注释" class="headerlink" title="类注释"></a>类注释</h3><p><strong>[建议]</strong> 使用 @class 标记类或构造函数。</p>
<p><strong>解释</strong><br>对于使用对象 constructor 属性来定义的构造函数，可以使用 @constructor 来标记。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 描述</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @class</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Developer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// constructor body</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 使用 @extends 标记类的继承信息。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 描述</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @class</span></div><div class="line"><span class="comment"> * @extends Developer</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fronteer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    Developer.call(<span class="keyword">this</span>);</div><div class="line">    <span class="comment">// constructor body</span></div><div class="line">&#125;</div><div class="line">util.inherits(Fronteer, Developer);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 使用包装方式扩展类成员时， 必须通过 @lends 进行重新指向。</p>
<p><strong>解释</strong><br>没有 @lends 标记将无法为该类生成包含扩展类成员的文档。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 类描述</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @class</span></div><div class="line"><span class="comment"> * @extends Developer</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fronteer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    Developer.call(<span class="keyword">this</span>);</div><div class="line">    <span class="comment">// constructor body</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">util.extend(</div><div class="line">    Fronteer.prototype,</div><div class="line">    <span class="comment">/** @lends Fronteer.prototype */</span>&#123;</div><div class="line">        _getLevel: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// TODO</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 类的属性或方法等成员信息使用 @public / @protected / @private 中的任意一个，指明可访问性。</p>
<p><strong>解释</strong><br>生成的文档中将有可访问性的标记，避免用户直接使用非 public 的属性或方法。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 类描述</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @class</span></div><div class="line"><span class="comment"> * @extends Developer</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">var</span> Fronteer = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    Developer.call(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 属性描述</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * @type &#123;string&#125;</span></div><div class="line"><span class="comment">     * @private</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">this</span>._level = <span class="string">'T12'</span>;</div><div class="line"></div><div class="line">    <span class="comment">// constructor body</span></div><div class="line">&#125;;</div><div class="line">util.inherits(Fronteer, Developer);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 方法描述</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @private</span></div><div class="line"><span class="comment"> * @return &#123;string&#125; 返回值描述</span></div><div class="line"><span class="comment"> */</span></div><div class="line">Fronteer.prototype._getLevel = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h3 id="函数-方法注释"><a href="#函数-方法注释" class="headerlink" title="函数/方法注释"></a>函数/方法注释</h3><p><strong>[强制]</strong> 函数/方法注释必须包含函数说明，有参数和返回值时必须使用注释标识。</p>
<hr>
<p><strong>[强制]</strong> 参数和返回值注释必须包含类型信息和说明。</p>
<hr>
<p><strong>[建议]</strong> 当函数是内部函数，外部不可访问时，可以使用 @inner 标识。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 函数描述</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @param &#123;string&#125; p1 参数1的说明</span></div><div class="line"><span class="comment"> * @param &#123;string&#125; p2 参数2的说明，比较长</span></div><div class="line"><span class="comment"> *     那就换行了.</span></div><div class="line"><span class="comment"> * @param &#123;number=&#125; p3 参数3的说明（可选）</span></div><div class="line"><span class="comment"> * @return &#123;Object&#125; 返回值描述</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">p1, p2, p3</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> p3 = p3 || <span class="number">10</span>;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        p1: p1,</div><div class="line">        p2: p2,</div><div class="line">        p3: p3</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 对 Object 中各项的描述， 必须使用 @param 标识。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 函数描述</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @param &#123;Object&#125; option 参数描述</span></div><div class="line"><span class="comment"> * @param &#123;string&#125; option.url option项描述</span></div><div class="line"><span class="comment"> * @param &#123;string=&#125; option.method option项描述，可选参数</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">option</span>) </span>&#123;</div><div class="line">    <span class="comment">// TODO</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 重写父类方法时， 应当添加 @override 标识。如果重写的形参个数、类型、顺序和返回值类型均未发生变化，可省略 @param 、@return ，仅用 @override 标识，否则仍应作完整注释。</p>
<p><strong>解释</strong><br>简而言之，当子类重写的方法能直接套用父类的方法注释时可省略对参数与返回值的注释。</p>
<h3 id="事件注释"><a href="#事件注释" class="headerlink" title="事件注释"></a>事件注释</h3><p><strong>[强制]</strong> 必须使用 @event 标识事件，事件参数的标识与方法描述的参数标识相同。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 值变更时触发</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @event</span></div><div class="line"><span class="comment"> * @param &#123;Object&#125; e e描述</span></div><div class="line"><span class="comment"> * @param &#123;string&#125; e.before before描述</span></div><div class="line"><span class="comment"> * @param &#123;string&#125; e.after after描述</span></div><div class="line"><span class="comment"> */</span></div><div class="line">onchange: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 在会广播事件的函数前使用 @fires 标识广播的事件，在广播事件代码前使用 @event 标识事件。</p>
<hr>
<p><strong>[建议]</strong> 对于事件对象的注释，使用 @param 标识，生成文档时可读性更好。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 点击处理</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @fires Select#change</span></div><div class="line"><span class="comment"> * @private</span></div><div class="line"><span class="comment"> */</span></div><div class="line">Select.prototype.clickHandler = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 值变更时触发</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * @event Select#change</span></div><div class="line"><span class="comment">     * @param &#123;Object&#125; e e描述</span></div><div class="line"><span class="comment">     * @param &#123;string&#125; e.before before描述</span></div><div class="line"><span class="comment">     * @param &#123;string&#125; e.after after描述</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">this</span>.fire(</div><div class="line">        <span class="string">'change'</span>,</div><div class="line">        &#123;</div><div class="line">            before: <span class="string">'foo'</span>,</div><div class="line">            after: <span class="string">'bar'</span></div><div class="line">        &#125;</div><div class="line">    );</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h3 id="常量注释"><a href="#常量注释" class="headerlink" title="常量注释"></a>常量注释</h3><p><strong>[强制]</strong> 常量必须使用 @const 标记，并包含说明和类型信息。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 常量说明</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @const</span></div><div class="line"><span class="comment"> * @type &#123;string&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">var</span> REQUEST_URL = <span class="string">'myurl.do'</span>;</div></pre></td></tr></table></figure></p>
<h3 id="复杂类型注释"><a href="#复杂类型注释" class="headerlink" title="复杂类型注释"></a>复杂类型注释</h3><p><strong>[建议]</strong> 对于类型未定义的复杂结构的注释，可以使用 @typedef 标识来定义。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// `namespaceA~` 可以换成其它 namepaths 前缀，目的是为了生成文档中能显示 `@typedef` 定义的类型和链接。</span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 服务器</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @typedef &#123;Object&#125; namespaceA~Server</span></div><div class="line"><span class="comment"> * @property &#123;string&#125; host 主机</span></div><div class="line"><span class="comment"> * @property &#123;number&#125; port 端口</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 服务器列表</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @type &#123;Array.&lt;namespaceA~Server&gt;&#125;</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">var</span> servers = [</div><div class="line">    &#123;</div><div class="line">        host: <span class="string">'1.2.3.4'</span>,</div><div class="line">        port: <span class="number">8080</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        host: <span class="string">'1.2.3.5'</span>,</div><div class="line">        port: <span class="number">8081</span></div><div class="line">    &#125;</div><div class="line">];</div></pre></td></tr></table></figure></p>
<h3 id="AMD-模块注释"><a href="#AMD-模块注释" class="headerlink" title="AMD 模块注释"></a>AMD 模块注释</h3><p><strong>[强制]</strong> AMD 模块使用 @module 或 @exports 标识。</p>
<p><strong>解释</strong><br>@exports 与 @module 都可以用来标识模块，区别在于 @module 可以省略模块名称。而只使用 @exports 时在 namepaths 中可以省略 module: 前缀。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">define(</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">require</span>) </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line"><span class="comment">         * foo description</span></div><div class="line"><span class="comment">         *</span></div><div class="line"><span class="comment">         * @exports Foo</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        <span class="keyword">var</span> foo = &#123;</div><div class="line">            <span class="comment">// TODO</span></div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line"><span class="comment">         * baz description</span></div><div class="line"><span class="comment">         *</span></div><div class="line"><span class="comment">         * @return &#123;boolean&#125; return description</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        foo.baz = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// TODO</span></div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> foo;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>也可以在 exports 变量前使用 @module 标识：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">define(</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">require</span>) </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line"><span class="comment">         * module description.</span></div><div class="line"><span class="comment">         *</span></div><div class="line"><span class="comment">         * @module foo</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        <span class="keyword">var</span> exports = &#123;&#125;;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line"><span class="comment">         * bar description</span></div><div class="line"><span class="comment">         *</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        exports.bar = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// TODO</span></div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> exports;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>如果直接使用 factory 的 exports 参数，还可以：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * module description.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @module</span></div><div class="line"><span class="comment"> */</span></div><div class="line">define(</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">require, exports</span>) </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line"><span class="comment">         * bar description</span></div><div class="line"><span class="comment">         *</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        exports.bar = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// TODO</span></div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">return</span> exports;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 对于已使用 @module 标识为 AMD模块 的引用，在 namepaths 中必须增加 module: 作前缀。</p>
<p><strong>解释</strong><br>namepaths 没有 module: 前缀时，生成的文档中将无法正确生成链接。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 点击处理</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @fires module:Select#change</span></div><div class="line"><span class="comment"> * @private</span></div><div class="line"><span class="comment"> */</span></div><div class="line">Select.prototype.clickHandler = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 值变更时触发</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * @event module:Select#change</span></div><div class="line"><span class="comment">     * @param &#123;Object&#125; e e描述</span></div><div class="line"><span class="comment">     * @param &#123;string&#125; e.before before描述</span></div><div class="line"><span class="comment">     * @param &#123;string&#125; e.after after描述</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">this</span>.fire(</div><div class="line">        <span class="string">'change'</span>,</div><div class="line">        &#123;</div><div class="line">            before: <span class="string">'foo'</span>,</div><div class="line">            after: <span class="string">'bar'</span></div><div class="line">        &#125;</div><div class="line">    );</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 对于类定义的模块，可以使用 @alias 标识构建函数。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * A module representing a jacket.</span></div><div class="line"><span class="comment"> * @module jacket</span></div><div class="line"><span class="comment"> */</span></div><div class="line">define(</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line"><span class="comment">         * @class</span></div><div class="line"><span class="comment">         * @alias module:jacket</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        <span class="keyword">var</span> Jacket = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> Jacket;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 多模块定义时，可以使用 @exports 标识各个模块。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// one module</span></div><div class="line">define(<span class="string">'html/utils'</span>,</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * Utility functions to ease working with DOM elements.</span></div><div class="line"><span class="comment">     * @exports html/utils</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> exports = &#123;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> exports;</div><div class="line">    &#125;</div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">// another module</span></div><div class="line">define(<span class="string">'tag'</span>,</div><div class="line">    <span class="comment">/** @exports tag */</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> exports = &#123;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> exports;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 对于 exports 为 Object 的模块，可以使用 @namespace 标识。</p>
<p><strong>解释</strong><br>使用 @namespace 而不是 @module 或 @exports 时，对模块的引用可以省略 module: 前缀。</p>
<hr>
<p><strong>[建议]</strong> 对于 exports 为类名的模块，使用 @class 和 @exports 标识。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 只使用 @class Bar 时，类方法和属性都必须增加 @name Bar#methodName 来标识，与 @exports 配合可以免除这一麻烦，并且在引用时可以省去 module: 前缀。</span></div><div class="line"><span class="comment">// 另外需要注意类名需要使用 var 定义的方式。</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Bar description</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @see foo</span></div><div class="line"><span class="comment"> * @exports  Bar</span></div><div class="line"><span class="comment"> * @class</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">var</span> Bar = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// TODO</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * baz description</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @return &#123;(string|Array)&#125; return description</span></div><div class="line"><span class="comment"> */</span></div><div class="line">Bar.prototype.baz = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// TODO</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h3 id="细节注释"><a href="#细节注释" class="headerlink" title="细节注释"></a>细节注释</h3><p>对于内部实现、不容易理解的逻辑说明、摘要信息等，我们可能需要编写细节注释。</p>
<p><strong>[建议]</strong> 细节注释遵循单行注释的格式。说明必须换行时，每行是一个单行注释的起始。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">p1, p2</span>) </span>&#123;</div><div class="line">    <span class="comment">// 这里对具体内部逻辑进行说明</span></div><div class="line">    <span class="comment">// 说明太长需要换行</span></div><div class="line">    <span class="keyword">for</span> (...) &#123;</div><div class="line">        ....</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 有时我们会使用一些特殊标记进行说明。特殊标记必须使用单行注释的形式。下面列举了一些常用标记：</p>
<p><strong>解释</strong></p>
<ul>
<li>TODO: 有功能待实现。此时需要对将要实现的功能进行简单说明。</li>
<li>FIXME: 该处代码运行没问题，但可能由于时间赶或者其他原因，需要修正。此时需要对如何修正进行简单说明。</li>
<li>HACK: 为修正某些问题而写的不太好或者使用了某些诡异手段的代码。此时需要对思路或诡异手段进行描述。</li>
<li>XXX: 该处存在陷阱。此时需要对陷阱进行描述。</li>
</ul>
<h1 id="语言特性"><a href="#语言特性" class="headerlink" title="语言特性"></a>语言特性</h1><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p><strong>[强制]</strong> [RULE070] 变量在使用前必须通过 var 定义。</p>
<p><strong>解释</strong><br>不通过 var 定义变量将导致变量污染全局环境。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">var</span> name = <span class="string">'MyName'</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">name = <span class="string">'MyName'</span>;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE071] 每个 var 只能声明一个变量。</p>
<p><strong>解释</strong><br>一个 var 声明多个变量，容易导致较长的行长度，并且在修改时容易造成逗号和分号的混淆。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">var</span> hangModules = [];</div><div class="line"><span class="keyword">var</span> missModules = [];</div><div class="line"><span class="keyword">var</span> visited = &#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> hangModules = [],</div><div class="line">    missModules = [],</div><div class="line">    visited = &#123;&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE072] 变量必须 即用即声明 ，不得在函数或其它形式的代码块起始位置统一声明所有变量。</p>
<p><strong>解释</strong><br>变量声明与使用的距离越远，出现的跨度越大，代码的阅读与维护成本越高。虽然JavaScript的变量是函数作用域，还是应该根据编程中的意图，缩小变量出现的距离空间。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">kv2List</span>(<span class="params">source</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> list = [];</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> source) &#123;</div><div class="line">        <span class="keyword">if</span> (source.hasOwnProperty(key)) &#123;</div><div class="line">            <span class="keyword">var</span> item = &#123;</div><div class="line">                k: key,</div><div class="line">                v: source[key]</div><div class="line">            &#125;;</div><div class="line">            list.push(item);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> list;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">kv2List</span>(<span class="params">source</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> list = [];</div><div class="line">    <span class="keyword">var</span> key;</div><div class="line">    <span class="keyword">var</span> item;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (key <span class="keyword">in</span> source) &#123;</div><div class="line">        <span class="keyword">if</span> (source.hasOwnProperty(key)) &#123;</div><div class="line">            item = &#123;</div><div class="line">                k: key,</div><div class="line">                v: source[key]</div><div class="line">            &#125;;</div><div class="line">            list.push(item);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> list;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h2><p><strong>[强制]</strong> [RULE073] 在 Equality Expression 中使用类型严格的 === 。仅当判断 null 或 undefined 时，允许使用 == null 。</p>
<p><strong>解释</strong><br>使用 === 可以避免等于判断中隐式的类型转换。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (age === <span class="number">30</span>) &#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (age == <span class="number">30</span>) &#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 尽可能使用简洁的表达式。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 字符串为空</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (!name) &#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (name === <span class="string">''</span>) &#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// 字符串非空</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (name) &#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (name !== <span class="string">''</span>) &#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// 数组非空</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (collection.length) &#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (collection.length &gt; <span class="number">0</span>) &#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// 布尔不成立</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (!notTrue) &#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (notTrue === <span class="literal">false</span>) &#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// null 或 undefined</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (noValue == <span class="literal">null</span>) &#123;</div><div class="line">  <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (noValue === <span class="literal">null</span> || <span class="keyword">typeof</span> noValue === <span class="string">'undefined'</span>) &#123;</div><div class="line">  <span class="comment">// ......</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 按执行频率排列分支的顺序。</p>
<p><strong>解释</strong><br>按执行频率排列分支的顺序好处是：</p>
<ul>
<li>阅读的人容易找到最常见的情况，增加可读性。</li>
<li>提高执行效率。</li>
</ul>
<hr>
<p><strong>[建议]</strong> 对于相同变量或表达式的多值条件，用 switch 代替 if 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">switch</span> (<span class="keyword">typeof</span> variable) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'object'</span>:</div><div class="line">        <span class="comment">// ......</span></div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    <span class="keyword">case</span> <span class="string">'number'</span>:</div><div class="line">    <span class="keyword">case</span> <span class="string">'boolean'</span>:</div><div class="line">    <span class="keyword">case</span> <span class="string">'string'</span>:</div><div class="line">        <span class="comment">// ......</span></div><div class="line">        <span class="keyword">break</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> type = <span class="keyword">typeof</span> variable;</div><div class="line"><span class="keyword">if</span> (type === <span class="string">'object'</span>) &#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'number'</span> || type === <span class="string">'boolean'</span> || type === <span class="string">'string'</span>) &#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 如果函数或全局中的 else 块后没有任何语句，可以删除 else 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (name) &#123;</div><div class="line">        <span class="keyword">return</span> name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="string">'unnamed'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (name) &#123;</div><div class="line">        <span class="keyword">return</span> name;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">'unnamed'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><p><strong>[建议]</strong> 不要在循环体中包含函数表达式，事先将函数提取到循环体外。</p>
<p><strong>解释</strong><br>循环体中的函数表达式，运行过程中会生成循环次数个函数对象。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">clicker</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = elements.length; i &lt; len; i++) &#123;</div><div class="line">    <span class="keyword">var</span> element = elements[i];</div><div class="line">    addListener(element, <span class="string">'click'</span>, clicker);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = elements.length; i &lt; len; i++) &#123;</div><div class="line">    <span class="keyword">var</span> element = elements[i];</div><div class="line">    addListener(element, <span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 对循环内多次使用的不变值，在循环外用变量缓存。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">var</span> width = wrap.offsetWidth + <span class="string">'px'</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = elements.length; i &lt; len; i++) &#123;</div><div class="line">    <span class="keyword">var</span> element = elements[i];</div><div class="line">    element.style.width = width;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = elements.length; i &lt; len; i++) &#123;</div><div class="line">    <span class="keyword">var</span> element = elements[i];</div><div class="line">    element.style.width = wrap.offsetWidth + <span class="string">'px'</span>;</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 对有序集合进行遍历时，缓存 length 。</p>
<p><strong>解释</strong><br>虽然现代浏览器都对数组长度进行了缓存，但对于一些宿主对象和老旧浏览器的数组对象，在每次 length 访问时会动态计算元素个数，此时缓存 length 能有效提高程序性能。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = elements.length; i &lt; len; i++) &#123;</div><div class="line">    <span class="keyword">var</span> element = elements[i];</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 对有序集合进行顺序无关的遍历时，使用逆序遍历。</p>
<p><strong>解释</strong><br>逆序遍历可以节省变量，代码比较优化。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> len = elements.length;</div><div class="line"><span class="keyword">while</span> (len--) &#123;</div><div class="line">    <span class="keyword">var</span> element = elements[len];</div><div class="line">    <span class="comment">// ......</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h2><h3 id="类型检测"><a href="#类型检测" class="headerlink" title="类型检测"></a>类型检测</h3><p><strong>[建议]</strong> 类型检测优先使用 typeof 。对象类型检测使用 instanceof 。null 或 undefined 的检测使用 == null 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// string</span></div><div class="line"><span class="keyword">typeof</span> variable === <span class="string">'string'</span></div><div class="line"></div><div class="line"><span class="comment">// number</span></div><div class="line"><span class="keyword">typeof</span> variable === <span class="string">'number'</span></div><div class="line"></div><div class="line"><span class="comment">// boolean</span></div><div class="line"><span class="keyword">typeof</span> variable === <span class="string">'boolean'</span></div><div class="line"></div><div class="line"><span class="comment">// Function</span></div><div class="line"><span class="keyword">typeof</span> variable === <span class="string">'function'</span></div><div class="line"></div><div class="line"><span class="comment">// Object</span></div><div class="line"><span class="keyword">typeof</span> variable === <span class="string">'object'</span></div><div class="line"></div><div class="line"><span class="comment">// RegExp</span></div><div class="line">variable <span class="keyword">instanceof</span> <span class="built_in">RegExp</span></div><div class="line"></div><div class="line"><span class="comment">// Array</span></div><div class="line">variable <span class="keyword">instanceof</span> <span class="built_in">Array</span></div><div class="line"></div><div class="line"><span class="comment">// null</span></div><div class="line">variable === <span class="literal">null</span></div><div class="line"></div><div class="line"><span class="comment">// null or undefined</span></div><div class="line">variable == <span class="literal">null</span></div><div class="line"></div><div class="line"><span class="comment">// undefined</span></div><div class="line"><span class="keyword">typeof</span> variable === <span class="string">'undefined'</span></div></pre></td></tr></table></figure></p>
<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><p><strong>[建议]</strong> 转换成 string 时，使用 + ‘’ 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line">num + <span class="string">''</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">String</span>(num);</div><div class="line">num.toString();</div><div class="line"><span class="built_in">String</span>(num);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 转换成 number 时，通常使用 + 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line">+str;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="built_in">Number</span>(str);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> string 转换成 number ，要转换的字符串结尾包含非数字并期望忽略时，使用 parseInt。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> width = <span class="string">'200px'</span>;</div><div class="line"><span class="built_in">parseInt</span>(width, <span class="number">10</span>);</div><div class="line">·[强制] [RULE086] 使用 <span class="built_in">parseInt</span> 时，必须指定进制。</div><div class="line">示例</div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="built_in">parseInt</span>(str, <span class="number">10</span>);</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="built_in">parseInt</span>(str);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 转换成 boolean 时，使用 !! 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> num = <span class="number">3.14</span>;</div><div class="line">!!num;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> number 去除小数点，使用 Math.floor / Math.round / Math.ceil ，不使用 parseInt。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">var</span> num = <span class="number">3.14</span>;</div><div class="line"><span class="built_in">Math</span>.ceil(num);</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> num = <span class="number">3.14</span>;</div><div class="line"><span class="built_in">parseInt</span>(num, <span class="number">10</span>);</div></pre></td></tr></table></figure></p>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p><strong>[强制]</strong> [RULE089] 字符串开头和结束使用单引号 ‘ 。</p>
<p><strong>解释</strong></p>
<ul>
<li>输入单引号不需要按住 shift，方便输入。</li>
<li>实际使用中，字符串经常用来拼接 HTML。为方便 HTML 中包含双引号而不需要转义写法。</li>
</ul>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = <span class="string">'我是一个字符串'</span>;</div><div class="line"><span class="keyword">var</span> html = <span class="string">'&lt;div class="cls"&gt;拼接HTML可以省去双引号转义&lt;/div&gt;'</span>;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 使用 数组 或 + 拼接字符串。</p>
<p><strong>解释</strong></p>
<ul>
<li>使用 + 拼接字符串，如果拼接的全部是 StringLiteral，压缩工具可以对其进行自动合并的优化。所以，静态字符串建议使用 + 拼接。</li>
<li>在现代浏览器下，使用 + 拼接字符串，性能较数组的方式要高。</li>
<li>如需要兼顾老旧浏览器，应尽量使用数组拼接字符串。</li>
</ul>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 使用数组拼接字符串</span></div><div class="line"><span class="keyword">var</span> str = [</div><div class="line">    <span class="comment">// 推荐换行开始并缩进开始第一个字符串, 对齐代码, 方便阅读.</span></div><div class="line">    <span class="string">'&lt;ul&gt;'</span>,</div><div class="line">        <span class="string">'&lt;li&gt;第一项&lt;/li&gt;'</span>,</div><div class="line">        <span class="string">'&lt;li&gt;第二项&lt;/li&gt;'</span>,</div><div class="line">    <span class="string">'&lt;/ul&gt;'</span></div><div class="line">].join(<span class="string">''</span>);</div><div class="line"></div><div class="line"><span class="comment">// 使用 + 拼接字符串</span></div><div class="line"><span class="keyword">var</span> str2 = <span class="string">''</span> <span class="comment">// 建议第一个为空字符串, 第二个换行开始并缩进开始, 对齐代码, 方便阅读</span></div><div class="line">    + <span class="string">'&lt;ul&gt;'</span>,</div><div class="line">    +    <span class="string">'&lt;li&gt;第一项&lt;/li&gt;'</span>,</div><div class="line">    +    <span class="string">'&lt;li&gt;第二项&lt;/li&gt;'</span>,</div><div class="line">    + <span class="string">'&lt;/ul&gt;'</span>;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 复杂的数据到视图字符串的转换过程，选用一种模板引擎。</p>
<p><strong>解释</strong><br>使用模板引擎有如下好处：</p>
<ol>
<li>在开发过程中专注于数据，将视图生成的过程由另外一个层级维护，使程序逻辑结构更清晰。</li>
<li>优秀的模板引擎，通过模板编译技术和高质量的编译产物，能获得比手工拼接字符串更高的性能。</li>
</ol>
<ul>
<li>artTemplate: 体积较小，在所有环境下性能高，语法灵活。</li>
<li>dot.js: 体积小，在现代浏览器下性能高，语法灵活。</li>
<li>etpl: 体积较小，在所有环境下性能高，模板复用性高，语法灵活。</li>
<li>handlebars: 体积大，在所有环境下性能高，扩展性高。</li>
<li>hogon: 体积小，在现代浏览器下性能高。</li>
<li>nunjucks: 体积较大，性能一般，模板复用性高。</li>
</ul>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><p><strong>[强制]</strong> [RULE092] 使用对象字面量 {} 创建新 Object 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">·[强制] [RULE094] 对象创建时，如果一个对象的所有 属性 均可以不添加引号，则所有 属性 不得添加引号。</div><div class="line">示例</div><div class="line"><span class="keyword">var</span> info = &#123;</div><div class="line">    name: <span class="string">'someone'</span>,</div><div class="line">    age: <span class="number">28</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 对象创建时，如果任何一个 属性 需要添加引号，则所有 属性 必须添加 ‘ 。</p>
<p><strong>解释</strong><br>如果属性不符合 Identifier 和 NumberLiteral 的形式，就需要以 StringLiteral 的形式提供。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">var</span> info = &#123;</div><div class="line">    <span class="string">'name'</span>: <span class="string">'someone'</span>,</div><div class="line">    <span class="string">'age'</span>: <span class="number">28</span>,</div><div class="line">    <span class="string">'more-info'</span>: <span class="string">'...'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> info = &#123;</div><div class="line">    name: <span class="string">'someone'</span>,</div><div class="line">    age: <span class="number">28</span>,</div><div class="line">    <span class="string">'more-info'</span>: <span class="string">'...'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE095] 不允许修改和扩展任何原生对象和宿主对象的原型。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 以下行为绝对禁止</span></div><div class="line"><span class="built_in">String</span>.prototype.trim = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 属性访问时，尽量使用 . 。</p>
<p><strong>解释</strong><br>属性名符合 Identifier 的要求，就可以通过 . 来访问，否则就只能通过 [expr] 方式访问。<br>通常在 JavaScript 中声明的对象，属性命名是使用 Camel 命名法，用 . 来访问更清晰简洁。部分特殊的属性(比如来自后端的JSON)，可能采用不寻常的命名方式，可以通过 [expr] 方式访问。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">info.age;</div><div class="line">info[<span class="string">'more-info'</span>];</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> for in 遍历对象时, 使用 hasOwnProperty 过滤掉原型中的属性。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> newInfo = &#123;&#125;;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> info) &#123;</div><div class="line">    <span class="keyword">if</span> (info.hasOwnProperty(key)) &#123;</div><div class="line">        newInfo[key] = info[key];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p><strong>[强制]</strong> [RULE098] 使用数组字面量 [] 创建新数组，除非想要创建的是指定长度的数组。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">var</span> arr = [];</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>();</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 遍历数组不使用 for in。</p>
<p><strong>解释</strong><br>数组对象可能存在数字以外的属性, 这种情况下 for in 不会得到正确结果.</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line">arr.other = <span class="string">'other things'</span>; <span class="comment">// 这里仅作演示, 实际中应使用Object类型</span></div><div class="line"></div><div class="line"><span class="comment">// 正确的遍历方式</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++) &#123;</div><div class="line">    <span class="built_in">console</span>.log(i);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 错误的遍历方式</span></div><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> arr) &#123;</div><div class="line">    <span class="built_in">console</span>.log(i);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 不因为性能的原因自己实现数组排序功能，尽量使用数组的 sort 方法。</p>
<p><strong>解释</strong><br>自己实现的常规排序算法，在性能上并不优于数组默认的 sort 方法。以下两种场景可以自己实现排序：</p>
<ul>
<li>需要稳定的排序算法，达到严格一致的排序结果。</li>
<li>数据特点鲜明，适合使用桶排。</li>
</ul>
<hr>
<p><strong>[建议]</strong> 清空数组使用 .length = 0 。</p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="函数长度"><a href="#函数长度" class="headerlink" title="函数长度"></a>函数长度</h3><p><strong>[建议]</strong> 一个函数的长度控制在 50 行以内。</p>
<p><strong>解释</strong><br>将过多的逻辑单元混在一个大函数中，易导致难以维护。一个清晰易懂的函数应该完成单一的逻辑单元。复杂的操作应进一步抽取，通过函数的调用来体现流程。<br>特定算法等不可分割的逻辑允许例外。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">syncViewStateOnUserAction</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (x.checked) &#123;</div><div class="line">        y.checked = <span class="literal">true</span>;</div><div class="line">        z.value = <span class="string">''</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        y.checked = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (!a.value) &#123;</div><div class="line">        warning.innerText = <span class="string">'Please enter it'</span>;</div><div class="line">        submitButton.disabled = <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        warning.innerText = <span class="string">''</span>;</div><div class="line">        submitButton.disabled = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 直接阅读该函数会难以明确其主线逻辑，因此下方是一种更合理的表达方式：</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">syncViewStateOnUserAction</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    syncXStateToView();</div><div class="line">    checkAAvailability();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">syncXStateToView</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (x.checked) &#123;</div><div class="line">        y.checked = <span class="literal">true</span>;</div><div class="line">        z.value = <span class="string">''</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        y.checked = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkAAvailability</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!a.value) &#123;</div><div class="line">        displayWarningForAMissing();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        clearWarnignForA();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="参数设计"><a href="#参数设计" class="headerlink" title="参数设计"></a>参数设计</h3><p><strong>[建议]</strong> 一个函数的参数控制在 6 个以内。</p>
<p><strong>解释</strong><br>除去不定长参数以外，函数具备不同逻辑意义的参数建议控制在 6 个以内，过多参数会导致维护难度增大。<br>某些情况下，如使用 AMD Loader 的 require 加载多个模块时，其 callback 可能会存在较多参数，因此对函数参数的个数不做强制限制。</p>
<hr>
<p><strong>[建议]</strong> 通过 options 参数传递非数据输入型参数。</p>
<p><strong>解释</strong><br>有些函数的参数并不是作为算法的输入，而是对算法的某些分支条件判断之用，此类参数建议通过一个 options 参数传递。<br>如下函数：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 移除某个元素</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @param &#123;Node&#125; element 需要移除的元素</span></div><div class="line"><span class="comment"> * @param &#123;boolean&#125; removeEventListeners 是否同时将所有注册在元素上的事件移除</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeElement</span>(<span class="params">element, removeEventListeners</span>) </span>&#123;</div><div class="line">    element.parent.removeChild(element);</div><div class="line">    <span class="keyword">if</span> (removeEventListeners) &#123;</div><div class="line">        element.clearEventListeners();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可以转换为下面的签名：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 移除某个元素</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @param &#123;Node&#125; element 需要移除的元素</span></div><div class="line"><span class="comment"> * @param &#123;Object&#125; options 相关的逻辑配置</span></div><div class="line"><span class="comment"> * @param &#123;boolean&#125; options.removeEventListeners 是否同时将所有注册在元素上的事件移除</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeElement</span>(<span class="params">element, options</span>) </span>&#123;</div><div class="line">    element.parent.removeChild(element);</div><div class="line">    <span class="keyword">if</span> (options.removeEventListeners) &#123;</div><div class="line">        element.clearEventListeners();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这种模式有几个显著的优势：</p>
<ul>
<li>boolean 型的配置项具备名称，从调用的代码上更易理解其表达的逻辑意义。</li>
<li>当配置项有增长时，无需无休止地增加参数个数，不会出现 removeElement(element, true, false, false, 3) 这样难以理解的调用代码。</li>
<li>当部分配置参数可选时，多个参数的形式非常难处理重载逻辑，而使用一个 options 对象只需判断属性是否存在，实现得以简化。</li>
</ul>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p><strong>[建议]</strong> 在适当的时候将闭包内大对象置为 null 。</p>
<p><strong>解释</strong><br>在 JavaScript 中，无需特别的关键词就可以使用闭包，一个函数可以任意访问在其定义的作用域外的变量。<br>需要注意的是，函数的作用域是静态的，即在定义时决定，与调用的时机和方式没有任何关系。<br>闭包会阻止一些变量的垃圾回收，对于较老旧的JavaScript引擎，可能导致外部所有变量均无法回收。<br>首先一个较为明确的结论是，以下内容会影响到闭包内变量的回收：</p>
<ul>
<li>嵌套的函数中是否有使用该变量。</li>
<li>嵌套的函数中是否有直接调用eval 。</li>
<li>是否使用了 with 表达式。</li>
</ul>
<p>Chakra、V8 和 SpiderMonkey 将受以上因素的影响，表现出不尽相同又较为相似的回收策略，<br>而JScript.dll和Carakan则完全没有这方面的优化，会完整保留整个 LexicalEnvironment 中的所有变量绑定，造成一定的内存消耗。<br>由于对闭包内变量有回收优化策略的 Chakra、V8 和 SpiderMonkey 引擎的行为较为相似，因此可以总结如下，当返回一个函数 fn 时：</p>
<ul>
<li>如果 fn 的 [[Scope]] 是ObjectEnvironment（with 表达式生成 ObjectEnvironment，函数和 catch 表达式生成 DeclarativeEnvironment），则：</li>
</ul>
<ol>
<li>如果是 V8 引擎，则退出全过程。</li>
<li>如果是 SpiderMonkey，则处理该 ObjectEnvironment 的外层 LexicalEnvironment。</li>
</ol>
<ul>
<li>获取当前 LexicalEnvironment 下的所有类型为 Function 的对象，对于每一个 Function 对象，分析其 FunctionBody：</li>
</ul>
<ol>
<li>如果 FunctionBody 中含有直接调用eval ，则退出全过程。</li>
<li>否则得到所有的 Identifier。</li>
<li>对于每一个 Identifier，设其为 name，根据查找变量引用的规则，从 LexicalEnvironment 中找出名称为 name 的绑定 binding。</li>
<li>对 binding 添加 notSwap 属性，其值为 true。</li>
</ol>
<ul>
<li>检查当前 LexicalEnvironment 中的每一个变量绑定，如果该绑定有 notSwap 属性且值为 true，则：</li>
</ul>
<ol>
<li>如果是V8引擎，删除该绑定。</li>
<li>如果是SpiderMonkey，将该绑定的值设为 undefined，将删除 notSwap 属性。</li>
</ol>
<p>对于Chakra引擎，暂无法得知是按 V8 的模式还是按 SpiderMonkey 的模式进行。<br>如果有 非常庞大 的对象，且预计会在老旧的引擎 中执行，则使用闭包时，注意将闭包不需要的对象置为空引用。</p>
<hr>
<p><strong>[建议]</strong> 使用 IIFE 避免 Lift 效应 。</p>
<p><strong>解释</strong><br>在引用函数外部变量时，函数执行时外部变量的值由运行时决定而非定义时，最典型的场景如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> tasks = [];</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</div><div class="line">    tasks[tasks.length] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Current cursor is at '</span> + i);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> len = tasks.length;</div><div class="line"><span class="keyword">while</span> (len--) &#123;</div><div class="line">    tasks[len]();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>以上代码对 tasks 中的函数的执行均会输出 Current cursor is at 5，往往不符合预期。<br>此现象称为Lift 效应 。解决的方式是通过额外加上一层闭包函数，将需要的外部变量作为参数传递来解除变量的绑定关系：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> tasks = [];</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</div><div class="line">    <span class="comment">// 注意有一层额外的闭包</span></div><div class="line">    tasks[tasks.length] = (<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'Current cursor is at '</span> + i);</div><div class="line">        &#125;;</div><div class="line">    &#125;)(i);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> len = tasks.length;</div><div class="line"><span class="keyword">while</span> (len--) &#123;</div><div class="line">    tasks[len]();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="空函数"><a href="#空函数" class="headerlink" title="空函数"></a>空函数</h3><p><strong>[建议]</strong> 空函数不使用 new Function() 的形式。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> emptyFunction = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 对于性能有高要求的场合，建议存在一个空函数的常量，供多处使用共享。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> EMPTY_FUNCTION = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyClass</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">MyClass.prototype.abstractMethod = EMPTY_FUNCTION;</div><div class="line">MyClass.prototype.hooks.before = EMPTY_FUNCTION;</div><div class="line">MyClass.prototype.hooks.after = EMPTY_FUNCTION;</div></pre></td></tr></table></figure></p>
<h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><p><strong>[强制]</strong> 类的继承方案，实现时需要修正 constructor。</p>
<p><strong>解释</strong><br>通常使用其他 library 的类继承方案都会进行 constructor 修正。如果是自己实现的类继承方案，需要进行 constructor 修正。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 构建类之间的继承关系</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @param &#123;Function&#125; subClass 子类函数</span></div><div class="line"><span class="comment"> * @param &#123;Function&#125; superClass 父类函数</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">inherits</span>(<span class="params">subClass, superClass</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> F = <span class="keyword">new</span> <span class="built_in">Function</span>();</div><div class="line">    F.prototype = superClass.prototype;</div><div class="line">    subClass.prototype = <span class="keyword">new</span> F();</div><div class="line">    subClass.prototype.constructor = subClass;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 声明类时，保证 constructor 的正确性。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 直接prototype等于对象时，需要修正constructor</span></div><div class="line">Animal.prototype = &#123;</div><div class="line">    <span class="keyword">constructor</span>: Animal,</div><div class="line"></div><div class="line">    jump: function () &#123;</div><div class="line">        alert(<span class="string">'animal '</span> + <span class="keyword">this</span>.name + <span class="string">' jump'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 这种方式扩展prototype则无需理会constructor</span></div><div class="line">Animal.prototype.jump = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="string">'animal '</span> + <span class="keyword">this</span>.name + <span class="string">' jump'</span>);</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 属性在构造函数中声明，方法在原型中声明。</p>
<p><strong>解释</strong><br>原型对象的成员被所有实例共享，能节约内存占用。所以编码时我们应该遵守这样的原则：原型对象包含程序不会修改的成员，如方法函数或配置项。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">TextNode</span>(<span class="params">value, engine</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.value = value;</div><div class="line">    <span class="keyword">this</span>.engine = engine;</div><div class="line">&#125;</div><div class="line"></div><div class="line">TextNode.prototype.clone = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 自定义事件的 事件名 必须全小写。</p>
<p><strong>解释</strong><br>在 JavaScript 广泛应用的浏览器环境，绝大多数 DOM 事件名称都是全小写的。为了遵循大多数 JavaScript 开发者的习惯，在设计自定义事件时，事件名也应该全小写。</p>
<hr>
<p><strong>[强制]</strong> 自定义事件只能有一个 event 参数。如果事件需要传递较多信息，应仔细设计事件对象。</p>
<p><strong>解释</strong><br>一个事件对象的好处有：</p>
<ul>
<li>顺序无关，避免事件监听者需要记忆参数顺序。</li>
<li>每个事件信息都可以根据需要提供或者不提供，更自由。</li>
<li>扩展方便，未来添加事件信息时，无需考虑会破坏监听器参数形式而无法向后兼容。</li>
</ul>
<hr>
<p><strong>[建议]</strong> 设计自定义事件时，应考虑禁止默认行为。</p>
<p><strong>解释</strong><br>常见禁止默认行为的方式有两种：</p>
<ul>
<li>事件监听函数中 return false。</li>
<li>事件对象中包含禁止默认行为的方法，如 preventDefault。</li>
</ul>
<h2 id="动态特性"><a href="#动态特性" class="headerlink" title="动态特性"></a>动态特性</h2><h3 id="eval"><a href="#eval" class="headerlink" title="eval"></a>eval</h3><p><strong>[强制]</strong> 避免使用直接 eval 函数。</p>
<p><strong>解释</strong><br>直接 eval，指的是以函数方式调用 eval 的调用方法。直接 eval 调用执行代码的作用域为本地作用域，应当避免。<br>如果有特殊情况需要使用直接 eval ，需在代码中用详细的注释说明为何必须使用直接 eval ，<br>不能使用其它动态执行代码的方式，同时需要其他资深工程师进行 Code Review。</p>
<hr>
<p><strong>[建议]</strong> 尽量避免使用 eval 函数。</p>
<h3 id="动态执行代码"><a href="#动态执行代码" class="headerlink" title="动态执行代码"></a>动态执行代码</h3><p><strong>[建议]</strong> 使用 new Function 执行动态代码。</p>
<p><strong>解释</strong><br>通过 new Function 生成的函数作用域是全局使用域，不会影响当当前的本地作用域。如果有动态代码执行的需求，建议使用 new Function 。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> handler = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'x'</span>, <span class="string">'y'</span>, <span class="string">'return x + y;'</span>);</div><div class="line"><span class="keyword">var</span> result = handler($(<span class="string">'#x'</span>).val(), $(<span class="string">'#y'</span>).val());</div></pre></td></tr></table></figure></p>
<h3 id="with"><a href="#with" class="headerlink" title="with"></a>with</h3><p><strong>[建议]</strong> 尽量不要使用 with。</p>
<p><strong>解释</strong><br>使用 with 可能会增加代码的复杂度，不利于阅读和管理；也会对性能有影响。大多数使用 with 的场景都能使用其他方式较好的替代。所以，尽量不要使用 with。</p>
<h3 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h3><p><strong>[建议]</strong> 减少 delete 的使用。</p>
<p><strong>解释</strong><br>如果没有特别的需求，减少或避免使用 delete 。delete 的使用会破坏部分 JavaScript 引擎的性能优化。</p>
<hr>
<p><strong>[建议]</strong> 处理 delete 可能产生的异常。</p>
<p><strong>解释</strong><br>对于有被遍历需求，且值 null 被认为具有业务逻辑意义的值的对象，移除某个属性必须使用 delete 操作。<br>在严格模式或IE下使用 delete 时，不能被删除的属性会抛出异常，因此在不确定属性是否可以删除的情况下，建议添加 try-catch 块。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    <span class="keyword">delete</span> o.x;</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> (deleteError) &#123;</div><div class="line">    o.x = <span class="literal">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="对象属性"><a href="#对象属性" class="headerlink" title="对象属性"></a>对象属性</h3><p><strong>[建议]</strong> 避免修改外部传入的对象。</p>
<p><strong>解释</strong><br>JavaScript 因其脚本语言的动态特性，当一个对象未被 seal 或 freeze 时，可以任意添加、删除、修改属性值。<br>但是随意地对 非自身控制的对象 进行修改，很容易造成代码在不可预知的情况下出现问题。因此，设计良好的组件、函数应该避免对外部传入的对象的修改。<br>下面代码的 selectNode 方法修改了由外部传入的 datasource 对象。如果 datasource 用在其它场合（如另一个 Tree 实例）下，会造成状态的混乱。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Tree</span>(<span class="params">datasource</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.datasource = datasource;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Tree.prototype.selectNode = <span class="function"><span class="keyword">function</span> (<span class="params">id</span>) </span>&#123;</div><div class="line">    <span class="comment">// 从datasource中找出节点对象</span></div><div class="line">    <span class="keyword">var</span> node = <span class="keyword">this</span>.findNode(id);</div><div class="line">    <span class="keyword">if</span> (node) &#123;</div><div class="line">        node.selected = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">this</span>.flushView();</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>对于此类场景，需要使用额外的对象来维护，使用由自身控制，不与外部产生任何交互的 selectedNodeIndex 对象来维护节点的选中状态，不对 datasource 作任何修改。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Tree</span>(<span class="params">datasource</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.datasource = datasource;</div><div class="line">    <span class="keyword">this</span>.selectedNodeIndex = &#123;&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Tree.prototype.selectNode = <span class="function"><span class="keyword">function</span> (<span class="params">id</span>) </span>&#123;</div><div class="line">    <span class="comment">// 从datasource中找出节点对象</span></div><div class="line">    <span class="keyword">var</span> node = <span class="keyword">this</span>.findNode(id);</div><div class="line">    <span class="keyword">if</span> (node) &#123;</div><div class="line">        <span class="keyword">this</span>.selectedNodeIndex[id] = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">this</span>.flushView();</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>除此之外，也可以通过 deepClone 等手段将自身维护的对象与外部传入的分离，保证不会相互影响。</p>
<hr>
<p><strong>[建议]</strong> 具备强类型的设计。</p>
<p><strong>解释</strong></p>
<ul>
<li>如果一个属性被设计为 boolean 类型，则不要使用 1 / 0 作为其值。对于标识性的属性，如对代码体积有严格要求，可以从一开始就设计为 number 类型且将 0 作为否定值。</li>
<li>从 DOM 中取出的值通常为 string 类型，如果有对象或函数的接收类型为 number 类型，提前作好转换，而不是期望对象、函数可以处理多类型的值。</li>
</ul>
<h1 id="浏览器环境"><a href="#浏览器环境" class="headerlink" title="浏览器环境"></a>浏览器环境</h1><h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><p><strong>[强制]</strong> 使用 AMD 作为模块定义。</p>
<p><strong>解释</strong><br>AMD 作为由社区认可的模块定义形式，提供多种重载提供灵活的使用方式，并且绝大多数优秀的 Library 都支持 AMD，适合作为规范。<br>目前，比较成熟的 AMD Loader 有：</p>
<ul>
<li>官方实现的 requirejs</li>
<li>百度自己实现的 esl</li>
</ul>
<hr>
<p><strong>[强制]</strong> 模块 id 必须符合标准。</p>
<p><strong>解释</strong><br>模块 id 必须符合以下约束条件：</p>
<ul>
<li>类型为 string，并且是由 / 分割的一系列 terms 来组成。例如：this/is/a/module。</li>
<li>term 应该符合 [a-zA-Z0-9_-]+ 规则。</li>
<li>不应该有 .js 后缀。</li>
<li>跟文件的路径保持一致。</li>
</ul>
<h3 id="define"><a href="#define" class="headerlink" title="define"></a>define</h3><p><strong>[建议]</strong> 定义模块时不要指明 id 和 dependencies 。</p>
<p><strong>解释</strong><br>在 AMD 的设计思想里，模块名称是和所在路径相关的，匿名的模块更利于封包和迁移。模块依赖应在模块定义内部通过 local require 引用。<br>所以，推荐使用 define(factory) 的形式进行模块定义。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">define(</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">require</span>) </span>&#123;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 使用 return 来返回模块定义。</p>
<p><strong>解释</strong><br>使用 return 可以减少 factory 接收的参数（不需要接收 exports 和 module），在没有 AMD Loader 的场景下也更容易进行简单的处理来伪造一个 Loader。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">define(</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">require</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> exports = &#123;&#125;;</div><div class="line"></div><div class="line">        <span class="comment">// ...</span></div><div class="line"></div><div class="line">        <span class="keyword">return</span> exports;</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<h3 id="require"><a href="#require" class="headerlink" title="require"></a>require</h3><p><strong>[强制]</strong> 全局运行环境中，require 必须以 async require 形式调用。</p>
<p><strong>解释</strong><br>模块的加载过程是异步的，同步调用并无法保证得到正确的结果。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="built_in">require</span>([<span class="string">'foo'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">foo</span>) </span>&#123;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> foo = <span class="built_in">require</span>(<span class="string">'foo'</span>);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 模块定义中只允许使用 local require ，不允许使用 global require 。</p>
<p><strong>解释</strong></p>
<ul>
<li>在模块定义中使用 global require，对封装性是一种破坏。</li>
<li>在 AMD 里，global require 是可以被重命名的。并且 Loader 甚至没有全局的 require 变量，而是用 Loader 名称做为 global require。模块定义不应该依赖使用的 Loader。</li>
</ul>
<hr>
<p><strong>[强制]</strong> Package在实现时，内部模块的 require 必须使用 relative id 。</p>
<p><strong>解释</strong><br>对于任何可能通过 发布-引入 的形式复用的第三方库、框架、包，开发者所定义的名称不代表使用者使用的名称。因此不要基于任何名称的假设。在实现源码中，require 自身的其它模块时使用 relative id。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">define(</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">require</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">'./util'</span>);</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 不会被调用的依赖模块，在 factory 开始处统一 require。</p>
<p><strong>解释</strong><br>有些模块是依赖的模块，但不会在模块实现中被直接调用，最为典型的是 css / js / tpl 等 Plugin 所引入的外部内容。此类内容建议放在模块定义最开始处统一引用。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">define(</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">require</span>) </span>&#123;</div><div class="line">        <span class="built_in">require</span>(<span class="string">'css!foo.css'</span>);</div><div class="line">        <span class="built_in">require</span>(<span class="string">'tpl!bar.tpl.html'</span>);</div><div class="line"></div><div class="line">        <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><h3 id="元素获取"><a href="#元素获取" class="headerlink" title="元素获取"></a>元素获取</h3><p><strong>[建议]</strong> 对于单个元素，尽可能使用 document.getElementById 获取，避免使用 document.all 。</p>
<hr>
<p><strong>[建议]</strong> 对于多个元素的集合，尽可能使用 context.getElementsByTagName 获取。其中 context 可以为 document 或其他元素。指定 tagName 参数为 * 可以获得所有子元素。</p>
<hr>
<p><strong>[建议]</strong> 遍历元素集合时，尽量缓存集合长度。如需多次操作同一集合，则应将集合转为数组。</p>
<p><strong>解释</strong><br>原生获取元素集合的结果并不直接引用 DOM 元素，而是对索引进行读取，所以 DOM 结构的改变会实时反映到结果中。</p>
<p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;&lt;/div&gt;</div><div class="line">&lt;span&gt;&lt;/span&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line"><span class="keyword">var</span> elements = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'*'</span>);</div><div class="line"></div><div class="line"><span class="comment">// 显示为 DIV</span></div><div class="line">alert(elements[<span class="number">0</span>].tagName);</div><div class="line"></div><div class="line"><span class="keyword">var</span> div = elements[<span class="number">0</span>];</div><div class="line"><span class="keyword">var</span> p = <span class="built_in">document</span>.createElement(<span class="string">'p'</span>);</div><div class="line">docpment.body.insertBefore(p, div);</div><div class="line"></div><div class="line"><span class="comment">// 显示为 P</span></div><div class="line">alert(elements[<span class="number">0</span>].tagName);</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 获取元素的直接子元素时使用 children。避免使用 childNodes ，除非预期是需要包含文本、注释和属性类型的节点。</p>
<h3 id="样式获取"><a href="#样式获取" class="headerlink" title="样式获取"></a>样式获取</h3><p><strong>[建议]</strong> 获取元素实际样式信息时，应使用 getComputedStyle 或 currentStyle 。</p>
<p><strong>解释</strong><br>通过 style 只能获得内联定义或通过 JavaScript 直接设置的样式。通过 CSS class 设置的元素样式无法直接通过 style 获取。</p>
<h3 id="样式设置"><a href="#样式设置" class="headerlink" title="样式设置"></a>样式设置</h3><p><strong>[建议]</strong> 尽可能通过为元素添加预定义的 className 来改变元素样式，避免直接操作 style 设置。</p>
<hr>
<p><strong>[强制]</strong> 通过 style 对象设置元素样式时，对于带单位非 0 值的属性，不允许省略单位。</p>
<p><strong>解释</strong><br>除了 IE，标准浏览器会忽略不规范的属性值，导致兼容性问题。</p>
<h3 id="DOM-操作"><a href="#DOM-操作" class="headerlink" title="DOM 操作"></a>DOM 操作</h3><p><strong>[建议]</strong> 操作 DOM 时，尽量减少页面 reflow。</p>
<p><strong>解释</strong><br>页面 reflow 是非常耗时的行为，非常容易导致性能瓶颈。下面一些场景会触发浏览器的reflow：</p>
<ul>
<li>DOM元素的添加、修改（内容）、删除。</li>
<li>应用新的样式或者修改任何影响元素布局的属性。</li>
<li>Resize浏览器窗口、滚动页面。</li>
<li>读取元素的某些属性（offsetLeft、offsetTop、offsetHeight、offsetWidth、scrollTop/Left/Width/Height、clientTop/Left/Width/Height、getComputedStyle()、currentStyle(in IE)) 。</li>
</ul>
<hr>
<p><strong>[建议]</strong> 尽量减少 DOM 操作。</p>
<p><strong>解释</strong><br>DOM 操作也是非常耗时的一种操作，减少 DOM 操作有助于提高性能。举一个简单的例子，构建一个列表。我们可以用两种方式：</p>
<ul>
<li>在循环体中 createElement 并 append 到父元素中。</li>
<li>在循环体中拼接 HTML 字符串，循环结束后写父元素的 innerHTML。<br>第一种方法看起来比较标准，但是每次循环都会对 DOM 进行操作，性能极低。在这里推荐使用第二种方法。</li>
</ul>
<h3 id="DOM-事件"><a href="#DOM-事件" class="headerlink" title="DOM 事件"></a>DOM 事件</h3><p><strong>[建议]</strong> 优先使用 addEventListener / attachEvent 绑定事件，避免直接在 HTML 属性中或 DOM 的 expando 属性绑定事件处理。</p>
<p><strong>解释</strong><br>expando 属性绑定事件容易导致互相覆盖。</p>
<hr>
<p><strong>[建议]</strong> 使用 addEventListener 时第三个参数使用 false。</p>
<p><strong>解释</strong><br>标准浏览器中的 addEventListener 可以通过第三个参数指定两种时间触发模型：冒泡和捕获。而 IE 的 attachEvent 仅支持冒泡的事件触发。所以为了保持一致性，通常 addEventListener 的第三个参数都为 false。</p>
<hr>
<p><strong>[建议]</strong> 在没有事件自动管理的框架支持下，应持有监听器函数的引用，在适当时候（元素释放、页面卸载等）移除添加的监听器。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mooncool.github.io/2017/05/19/javascript-style-guide/" data-id="cjcg9ph2l00012eyrn1mwahs1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码规范/">代码规范</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-php-style-guide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/12/php-style-guide/" class="article-date">
  <time datetime="2017-05-12T02:48:53.000Z" itemprop="datePublished">2017-05-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/12/php-style-guide/">PHP代码规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul>
<li>源码文件必须采用UTF-8编码，且不得有BOM头，某些历史遗留的GBK模块除外。</li>
<li>编码风格没有太多的好坏之分, 最重要的是风格保持一致，编码规范有助于规范我们编码的风格，使代码具有更好的可读性。</li>
<li>PHP在新格尔内部应用得越来越广泛，但是却缺乏相应的编码规范支持，编码风格百家齐放，不利于我们代码的维护和传承， 根据大家平时的开发情况，制定了此PHP编码规范。</li>
<li>每项规范前面的 <strong>[强制]</strong> 代表该规范需要强制执行, <strong>[建议]</strong> 代表推荐执行但不强制。</li>
<li>注: 文中所有的变量名前面为了方便没有加”$”, 示意即可。</li>
<li>本文档风格约定部分可能跟你的喜好有冲突，请尽量用包容的心态来阅读。有任何问题或建议，欢迎跟我们讨论: zhujian@cshen.cn</li>
</ul>
<h1 id="排版"><a href="#排版" class="headerlink" title="排版"></a>排版</h1><p><strong>[强制]</strong> [PHP002] 程序块要采用缩进风格编写，缩进的空格数建议为4个，单模块内必须统一。</p>
<p><strong>解释</strong><br>不同的缩进风格对代码的可读性影响很大，以tab为缩进单位在不同的tab step 下可读性也相差很多，所以将缩进定为一个soft tab即4个空格，这样在所有环境下缩进都会保持一致。</p>
<hr>
<p><strong>[建议]</strong> 关键字与其后的左括号之间有一个空格，而函数名与左括号之间不应有任何字符包括空格。</p>
<p><strong>解释</strong><br>虽然很多情况下编辑器的highlight已经做了区分，但是从格式上区分关键字和函数适用于所有的情况。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">关键字    <span class="keyword">if</span> (a &gt; b)</div><div class="line">函数名    funcA()</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 开始的大括号位于一行的末尾，结束的括号位于最末一行后，且独占一行。首括号也可另起一行，但一个模块内必须统一。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (a &gt; b) &#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [PHP003] if/while等结构体，即使只有一行，也必须加上花括号，不得写成一行。</p>
<p><strong>解释</strong><br>这样做可读性更好，并且方便修改。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (a &gt; b) &#123;</div><div class="line">    a = <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 一行代码不得超过120个字节，建议控制在80字节内；一个函数不得超过500行，建议控制在100行以内。</p>
<p><strong>解释</strong><br>代码更美观， 可读性更好</p>
<hr>
<p><strong>[建议]</strong> else-if语句使用else if形式，不使用elseif形式。</p>
<hr>
<p><strong>[建议]</strong> 函数名与其后的左括号之间不应有任何字符(包括空格) 函数调用的左括号与其第一个参数之间不应有任何字符(包括空格) 最后一个参数与右括号之间不应有任何字符(包括空格) 参数列表的逗号后面应有一个空格</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">funcA(a, b, c) &#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 避免由于对错误的条件做判断带来if的嵌套。</p>
<p><strong>解释</strong><br>减少if/else嵌套， 更利于代码逻辑的理解。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">不推荐的方式:</div><div class="line"><span class="keyword">if</span> (a === <span class="keyword">false</span>) &#123;</div><div class="line">    <span class="comment">// error handle</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">if</span> (b === <span class="keyword">false</span>) &#123;</div><div class="line">        <span class="comment">// handle</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">推荐的方式:</div><div class="line"><span class="keyword">if</span> (a === <span class="keyword">false</span>) &#123;</div><div class="line">    <span class="comment">// error handle</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (b === <span class="keyword">false</span>) &#123;</div><div class="line">    <span class="comment">// handle</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 如果过长的话需要另起一行。if 语句的条件若较多较长，应折行；新行以逻辑运算符起始，与第一行 if 左括号后的第一个字符对齐；折行后，每行条件具有独立而明确的语义</p>
<p><strong>解释</strong><br>这样做逻辑更一目了然。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (a &gt; b &amp;&amp; c &gt; d</div><div class="line">    &amp;&amp; e &gt; f &amp;&amp; h &gt; j</div><div class="line">    &amp;&amp; z &gt; x) &#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 多行的”=”可能的话尽量用空格对齐。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">a   = <span class="number">1</span>;</div><div class="line">ab  = <span class="number">2</span>;</div><div class="line">abc = <span class="number">3</span>;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [PHP009] Switch语句中每个case的break必须和case间有缩进。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">case</span> <span class="string">'A'</span>:</div><div class="line">    a  = <span class="number">2</span>;</div><div class="line">    <span class="keyword">break</span>;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [PHP008] 初始化array如果采用多行结构时，数据项部分需要缩进，且最后一个数据项后面的逗号不可省略。</p>
<p><strong>解释</strong><br>这样做在修改代码增加数据项的时候不容易出现语法错误。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$a = <span class="keyword">array</span>(</div><div class="line">    <span class="string">'a'</span> =&gt; <span class="string">'b'</span>,</div><div class="line">    <span class="string">'b'</span> =&gt; <span class="string">'c'</span>,</div><div class="line">    <span class="string">'c'</span> =&gt; <span class="string">'d'</span>,</div><div class="line">);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 复杂的表达式, 使用括号表明优先级, 而不完全依赖运算符优先级。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 不推荐方式:</span></div><div class="line"><span class="keyword">if</span> ($a &amp;&amp; $b || $c + $b &amp;&amp; $e) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 推荐方式：</span></div><div class="line"><span class="keyword">if</span> (($a &amp;&amp; $b) || (($c + $b) &amp;&amp; $e)) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 同一个代码块的变量定义, 应该尽可能集中在块开始位置，提高可读性。</p>
<hr>
<p><strong>[建议]</strong> 除模板外，不允许使用 ?&gt; 标记结尾, 避免其后误加的字符干扰页面渲染。</p>
<hr>
<p><strong>[建议]</strong> 产品线内必须统一换行符的使用, 推荐”\n”。</p>
<hr>
<h1 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h1><p><strong>[强制]</strong> [PHP025] 全局变量以g_开头。</p>
<p><strong>解释</strong><br>全局变量对代码影响很大，以g_开头便能在代码中一眼看出是全局变量。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">g_count;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [PHP004] 常量命名使用全部大写字符，单词之间以”_”连接。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PAGE_NUM</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 对于代码中的常量，建议用常量或define表示，不应直接写在代码中。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">define(<span class="string">'PAGE_NUM'</span>, <span class="number">3</span>);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [PHP010] 关键字true、false、null必须小写</p>
<hr>
<p><strong>[强制]</strong> [PHP026] 类method命名采用驼峰命名, 普通function采用过程函数风格命名。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">类method：</div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">普通<span class="function"><span class="keyword">function</span>：</span></div><div class="line"><span class="function"><span class="title">function</span> <span class="title">show_me_the_money</span><span class="params">()</span> </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 类成员变量和局部变量必须采用驼峰命名法，建议增加三字节的类型前缀：arr、str、int、bol、obj等</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$strName, $intAge</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 文件(除了类)命名使用小写字母，单词之间以”_”连接。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">show_lemma.php</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 配置文件的名称为配置文件名 + .conf.php, 不涉及类的都小写通过”_”连接。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">good_version.conf.php</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 类名应以大写字母开头，每个单词的首字母大写。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ActionController</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> final放在访问控制符的前面、访问控制符放在static的前面</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><p><strong>[建议]</strong> 文件、函数、类以及成员变量都应包含注释，关键代码必须有注释。<br>类文件/普通文件的注释, 说明该文件的主要作用。</p>
<p><strong>示例</strong><br>“A simple class describing employees” 说明类文件的主要作用。<br>“@package Employee” 说明namespace(如果有)<br>“@author George Schlossnagle” 说明作者信息</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * A simple class describing employees</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * <span class="doctag">@package</span> Employee</span></div><div class="line"><span class="comment"> * <span class="doctag">@author</span> George Schlossnagle</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure>
<p>类的注释, 说明该类的主要作用。</p>
<p><strong>示例</strong><br>“An example of documenting a class” 说明类的主要作用。<br>“The employees annual salary” 说明变量的作用。<br>“@var number” 说明变量的类型。<br>“The class constructor” 说明方法的作用。<br>“@param” 说明参数类型。<br>“@access” 说明访问权限。<br>“@return” 说明返回值。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * An example of documenting a class</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span></div><div class="line"><span class="class"></span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * <span class="doctag">@var</span> string</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">private</span> $name;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * The employees annual salary</span></div><div class="line"><span class="comment">     * <span class="doctag">@var</span> number</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">private</span> $salary;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * <span class="doctag">@var</span> number</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">private</span> $employee_id;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * The class constructor</span></div><div class="line"><span class="comment">     * <span class="doctag">@param</span> number</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">Employee</span><span class="params">($employee_id = false)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> ($employee_id) &#123;</div><div class="line">            <span class="keyword">$this</span>-&gt;employee_id = $employee_id;</div><div class="line">            <span class="keyword">$this</span>-&gt;_fetchInfo();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * Fetches info for employee</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * <span class="doctag">@access</span> private</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchInfo</span><span class="params">()</span> </span>&#123;</div><div class="line">          $query = <span class="string">"SELECT name,</span></div><div class="line"><span class="string">                       salary</span></div><div class="line"><span class="string">                    FROM employees</span></div><div class="line"><span class="string">                    WHERE employee_id = $this-&gt;employee_id"</span>;</div><div class="line">          $result = mysql_query($query);</div><div class="line">          <span class="keyword">list</span>(<span class="keyword">$this</span>-&gt;name, <span class="keyword">$this</span>-&gt;department_id) = mysql_fetch_row($result);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * Returns the monthly salary for the employee</span></div><div class="line"><span class="comment">     * <span class="doctag">@return</span> number Monthly salary in dollars</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">monthlySalary</span><span class="params">()</span> </span>&#123;</div><div class="line">          <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;salary/<span class="number">12</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><strong>[强制]</strong> [PHP027] 不能使用#作为单行注释, 多行注释/ <em> *</em>/不能出现在同一行。</p>
<hr>
<p><strong>[强制]</strong> [PHP028] 函数必须通过param和return标记指明其参数和返回值。</p>
<hr>
<p><strong>[建议]</strong> 注释需要遵守phpDocumentor等注释规范，同一团队内部必须保持一致。</p>
<hr>
<p><strong>[建议]</strong> 必要的地方使用非文档性注释，提高代码易读性。</p>
<h1 id="编码原则"><a href="#编码原则" class="headerlink" title="编码原则"></a>编码原则</h1><p><strong>[建议]</strong>对传入或返回的参数进行类型检查和显式转换。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$intSalary = (int) $salary;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 对于函数返回值的判断，特别是true/false, 必须用===或!==。</p>
<hr>
<p><strong>[强制]</strong> [PHP029] 生成对象时，必须使用new Classname()，不能用new Classname。</p>
<hr>
<p><strong>[强制]</strong> 所有文件路径都需要利用框架提供的宏写成绝对路径。</p>
<hr>
<p><strong>[建议]</strong> 对于长时间运行的CLI程序，需要及时unset无用变量，尤其是PHP5.2上。</p>
<hr>
<p><strong>[强制]</strong> 对于一些系统操作，使用php内置的函数例如rename、touch等即可。尽量避免使用exec调用shell命令。</p>
<hr>
<p><strong>[建议]</strong> 除非特殊情况，否则不允许使用require和include,而使用对应的require_once/include_once。</p>
<hr>
<p><strong>[建议]</strong> 配置项与PHP代码分离，不随CVS/SVN发布</p>
<hr>
<p><strong>[强制]</strong> 预定义变量一律使用短格式，即：$_POST、$_GET、$_SERVER、$_ENV等，不再使用长格式：$_HTTP_POST_VARS、$_HTTP_GET_VARS。</p>
<hr>
<p><strong>[强制]</strong> 类文件名必须符合所用框架自动加载规范，常见的是PSR-0。</p>
<hr>
<p><strong>[建议]</strong> 除模板外，尽量不要在php代码中出现html标签。</p>
<hr>
<p><strong>[建议]</strong> 能用foreach的就不要用for,能用for的就不要用while。</p>
<hr>
<p><strong>[强制]</strong> 每个前端访问请求必须有且仅有一条notice日志。</p>
<hr>
<p><strong>[建议]</strong> 数据库写操作必须有日志记录；记录条数应与操作一一对应。</p>
<hr>
<p><strong>[强制]</strong> 文件更新操作，必须使用临时文件+mv的方式，切忌直接写在原文件。</p>
<hr>
<p><strong>[建议]</strong> 字符串尽量用’ ‘而不是” “进行引用，一个是效率问题，一个是安全问题。</p>
<hr>
<p><strong>[强制]</strong> [PHP031] 所有的define语句，常量必须用’’包括起来。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">define(<span class="string">'PAGE_NUM'</span>, <span class="number">3</span>);</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> require/include后面不使用括号。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require_once</span> <span class="string">"a.php"</span>;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [PHP020] 函数允许使用默认参数,但是默认参数需要放到参数列表最后面。</p>
<hr>
<p><strong>[强制]</strong> [PHP032] 所有的全局变量应该写在函数的最开头，并且和后面的代码以空行隔开。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">global</span> g_count;</div><div class="line">    <span class="keyword">global</span> g_time;</div><div class="line"></div><div class="line">    a = <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [PHP033] 禁止使用and, or, 而是使用&amp;&amp;, ||</p>
<hr>
<p><strong>[建议]</strong> 避免使用$i, $j这样无意义的变量名, 除非是用作循环计数变量。</p>
<hr>
<p><strong>[建议]</strong> 避免使用php逻辑代码作为配置, 以降低改配置的危险性。</p>
<hr>
<p><strong>[建议]</strong> 进行==判断时，建议把常量放在前面, 避免误写成赋值操作。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">不推荐形式：</div><div class="line"><span class="keyword">if</span> ($a == <span class="number">1</span>) &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">推荐形式：</div><div class="line"><span class="keyword">if</span> (<span class="number">1</span> == $a) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 使用变量前赋初值，提高可读性，也可避免误用别处定义的同名变量。</p>
<hr>
<p><strong>[建议]</strong> 错误码使用统一文件集中配置，并且使用常量，而不应裸写数字</p>
<hr>
<p><strong>[建议]</strong> 对于无需子类化的实体类以及不应重载的方法使用final关键字限定。</p>
<hr>
<p><strong>[强制]</strong> 对于不应实例化的父类使用abstract关键字限定。</p>
<hr>
<p><strong>[建议]</strong> 避免重载父类的static成员，这在5.2.x存在问题。</p>
<hr>
<p><strong>[建议]</strong> 对于仅用于某个函数或类的全局变量，使用static的局部变量或者类成员变量代替。</p>
<hr>
<p><strong>[建议]</strong> 在头文件中用$GLOBALS定义全局变量，避免局部包含导致的作用域问题。</p>
<h1 id="代码性能"><a href="#代码性能" class="headerlink" title="代码性能"></a>代码性能</h1><p><strong>[强制]</strong> [PHP034] 把重复调用放在循环体外。</p>
<p><strong>示例</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">不推荐形式：</div><div class="line"><span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; count($arr); $i++)</div><div class="line"></div><div class="line">推荐形式：</div><div class="line">$arrCount = count($arr);</div><div class="line"><span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $arrCount; $i++)</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mooncool.github.io/2017/05/12/php-style-guide/" data-id="cjcg9ph2s00082eyros1couns" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码规范/">代码规范</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-css-style-guide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/11/css-style-guide/" class="article-date">
  <time datetime="2017-05-10T16:12:53.000Z" itemprop="datePublished">2017-05-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/11/css-style-guide/">CSS编码规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="代码风格"><a href="#代码风格" class="headerlink" title="代码风格"></a>代码风格</h1><h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><p><strong>[建议]</strong> CSS 文件使用无 BOM 的 UTF-8 编码。</p>
<p><strong>解释</strong><br>UTF-8 编码具有更广泛的适应性。BOM 在使用程序或工具处理文件时可能造成不必要的干扰。</p>
<h2 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h2><p><strong>[强制]</strong> [RULE002] 使用 4 个空格做为一个缩进层级，不允许使用 2 个空格 或 tab 字符。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.selector</span> &#123;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h2><p><strong>[强制]</strong> [RULE003] 选择器 与 { 之间必须包含空格。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.selector</span> &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE004] 属性名 与之后的 : 之间不允许包含空格， : 与 属性值 之间必须包含空格。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">margin</span>: 0,</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE005] 列表型属性值 书写在单行时，, 后必须跟一个空格。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">font-family</span>: <span class="selector-tag">Arial</span>, <span class="selector-tag">sans-serif</span>;</div></pre></td></tr></table></figure></p>
<h2 id="行长度"><a href="#行长度" class="headerlink" title="行长度"></a>行长度</h2><p><strong>[强制]</strong> [RULE006] 每行不得超过 120 个字符，除非单行不可分割。</p>
<p><strong>解释</strong><br>常见不可分割的场景为URL超长。</p>
<hr>
<p><strong>[建议]</strong> 对于超长的样式，在样式值的 空格 处或 , 后换行，建议按逻辑分组。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* 不同属性值按逻辑分组 */</span></div><div class="line"><span class="selector-tag">background</span>:</div><div class="line">    <span class="selector-tag">transparent</span> <span class="selector-tag">url</span>(<span class="selector-tag">aVeryVeryVeryLongUrlIsPlacedHere</span>)</div><div class="line">    <span class="selector-tag">no-repeat</span> 0 0;</div><div class="line"></div><div class="line"><span class="comment">/* 可重复多次的属性，每次重复一行 */</span></div><div class="line"><span class="selector-tag">background-image</span>:</div><div class="line">    <span class="selector-tag">url</span>(<span class="selector-tag">aVeryVeryVeryLongUrlIsPlacedHere</span>)</div><div class="line">    <span class="selector-tag">url</span>(<span class="selector-tag">anotherVeryVeryVeryLongUrlIsPlacedHere</span>);</div><div class="line"></div><div class="line"><span class="comment">/* 类似函数的属性值可以根据函数调用的缩进进行 */</span></div><div class="line"><span class="selector-tag">background-image</span>: <span class="selector-tag">-webkit-gradient</span>(</div><div class="line">    <span class="selector-tag">linear</span>,</div><div class="line">    <span class="selector-tag">left</span> <span class="selector-tag">bottom</span>,</div><div class="line">    <span class="selector-tag">left</span> <span class="selector-tag">top</span>,</div><div class="line">    <span class="selector-tag">color-stop</span>(0<span class="selector-class">.04</span>, <span class="selector-tag">rgb</span>(88,94,124)),</div><div class="line">    <span class="selector-tag">color-stop</span>(0<span class="selector-class">.52</span>, <span class="selector-tag">rgb</span>(115,123,162))</div><div class="line">);</div></pre></td></tr></table></figure></p>
<h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><p><strong>[强制]</strong> [RULE008] 当一个 rule 包含多个 selector 时，每个选择器声明必须独占一行。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-class">.post</span>,</div><div class="line"><span class="selector-class">.page</span>,</div><div class="line"><span class="selector-class">.comment</span> &#123;</div><div class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-class">.post</span>, <span class="selector-class">.page</span>, <span class="selector-class">.comment</span> &#123;</div><div class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE009] &gt;、+、~ 选择器的两边各保留一个空格。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-tag">main</span> &gt; <span class="selector-tag">nav</span> &#123;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">label</span> + <span class="selector-tag">input</span> &#123;</div><div class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-tag">button</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#69C</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-tag">main</span>&gt;<span class="selector-tag">nav</span> &#123;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">label</span>+<span class="selector-tag">input</span> &#123;</div><div class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:checked</span>~<span class="selector-tag">button</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#69C</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE010] 属性选择器中的值必须用双引号包围。</p>
<p><strong>解释</strong><br>不允许使用单引号，不允许不使用引号。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-tag">article</span><span class="selector-attr">[character="juliet"]</span> &#123;</div><div class="line">    <span class="attribute">voice-family</span>: <span class="string">"Vivien Leigh"</span>, victoria, female</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-tag">article</span><span class="selector-attr">[character='juliet']</span> &#123;</div><div class="line">    <span class="attribute">voice-family</span>: <span class="string">"Vivien Leigh"</span>, victoria, female</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><p><strong>[强制]</strong> [RULE011] 属性定义必须另起一行。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-class">.selector</span> &#123;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-class">.selector</span> &#123; <span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">0</span>; &#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE012] 属性定义后必须以分号结尾。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-class">.selector</span> &#123;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-class">.selector</span> &#123;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="通用"><a href="#通用" class="headerlink" title="通用"></a>通用</h1><h2 id="选择器-1"><a href="#选择器-1" class="headerlink" title="选择器"></a>选择器</h2><p><strong>[强制]</strong> [RULE013] 如无必要，不得为 id、class 选择器添加类型选择器进行限定。</p>
<p><strong>解释</strong><br>在性能和维护性上，都有一定的影响。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-id">#error</span>,</div><div class="line"><span class="selector-class">.danger-message</span> &#123;</div><div class="line">    <span class="attribute">font-color</span>: <span class="number">#c00</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-tag">dialog</span><span class="selector-id">#error</span>,</div><div class="line"><span class="selector-tag">p</span><span class="selector-class">.danger-message</span> &#123;</div><div class="line">    <span class="attribute">font-color</span>: <span class="number">#c00</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 选择器的嵌套层级应不大于 3 级，位置靠后的限定条件应尽可能精确。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-id">#username</span> <span class="selector-tag">input</span> &#123;&#125;</div><div class="line"><span class="selector-class">.comment</span> <span class="selector-class">.avatar</span> &#123;&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-class">.page</span> <span class="selector-class">.header</span> <span class="selector-class">.login</span> <span class="selector-id">#username</span> <span class="selector-tag">input</span> &#123;&#125;</div><div class="line"><span class="selector-class">.comment</span> <span class="selector-tag">div</span> * &#123;&#125;</div></pre></td></tr></table></figure></p>
<h2 id="属性缩写"><a href="#属性缩写" class="headerlink" title="属性缩写"></a>属性缩写</h2><p><strong>[建议]</strong> 在可以使用缩写的情况下，尽量使用属性缩写。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-class">.post</span> &#123;</div><div class="line">    <span class="attribute">font</span>: <span class="number">12px</span>/<span class="number">1.5</span> arial, sans-serif;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-class">.post</span> &#123;</div><div class="line">    <span class="attribute">font-family</span>: arial, sans-serif;</div><div class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</div><div class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 使用 border / margin / padding 等缩写时，应注意隐含值对实际数值的影响，确实需要设置多个方向的值时才使用缩写。</p>
<p><strong>解释</strong><br>border / margin / padding 等缩写会同时设置多个属性的值，容易覆盖不需要覆盖的设定。如某些方向需要继承其他声明的值，则应该分开设置。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* centering &lt;article class="page"&gt; horizontally and highlight featured ones */</span></div><div class="line"><span class="selector-tag">article</span> &#123;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">5px</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#999</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-class">.page</span> &#123;</div><div class="line">    <span class="attribute">margin-right</span>: auto;</div><div class="line">    <span class="attribute">margin-left</span>: auto;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.featured</span> &#123;</div><div class="line">    <span class="attribute">border-color</span>: <span class="number">#69c</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-class">.page</span> &#123;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">5px</span> auto; <span class="comment">/* introducing redundancy */</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.featured</span> &#123;</div><div class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#69c</span>; <span class="comment">/* introducing redundancy */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="属性书写顺序"><a href="#属性书写顺序" class="headerlink" title="属性书写顺序"></a>属性书写顺序</h2><p><strong>[建议]</strong> 同一 rule set 下的属性在书写时，应按功能进行分组，并以 Formatting Model（布局方式、位置） &gt; Box Model（尺寸） &gt; Typographic（文本相关） &gt; Visual（视觉效果） 的顺序书写，以提高代码的可读性。</p>
<p><strong>解释</strong></p>
<ul>
<li>Formatting Model 相关属性包括：position / top / right / bottom / left / float / display/ overflow 等</li>
<li>Box Model 相关属性包括：border / margin / padding / width / height 等</li>
<li>Typographic 相关属性包括：font / line-height / text-align / word-wrap 等</li>
<li>Visual 相关属性包括：background / color / transition / list-style 等<br>另外，如果包含 content 属性，应放在最前面。</li>
</ul>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.sidebar</span> &#123;</div><div class="line">    <span class="comment">/* formatting model: positioning schemes / offsets / z-indexes / display / ...  */</span></div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">top</span>: <span class="number">50px</span>;</div><div class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">overflow-x</span>: hidden;</div><div class="line"></div><div class="line">    <span class="comment">/* box model: sizes / margins / paddings / borders / ...  */</span></div><div class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">5px</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</div><div class="line"></div><div class="line">    <span class="comment">/* typographic: font / aligns / text styles / ... */</span></div><div class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</div><div class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</div><div class="line"></div><div class="line">    <span class="comment">/* visual: colors / shadows / gradients / ... */</span></div><div class="line">    <span class="attribute">background</span>: <span class="number">#f5f5f5</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</div><div class="line">    <span class="attribute">-webkit-transition</span>: color <span class="number">1s</span>;</div><div class="line">       <span class="attribute">-moz-transition</span>: color <span class="number">1s</span>;</div><div class="line">            <span class="attribute">transition</span>: color <span class="number">1s</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h2><p><strong>[建议]</strong> 当元素需要撑起高度以包含内部的浮动元素时，通过对伪类设置 clear 或触发 BFC 的方式进行 clearfix。尽量不使用增加空标签的方式。</p>
<p><strong>解释</strong><br>触发 BFC 的方式很多，常见的有：<br>•    float 非 none<br>•    position 非 static<br>•    overflow 非 visible<br>如希望使用更小副作用的清除浮动方法，参见 A new micro clearfix hack 一文。<br>另需注意，对已经触发 BFC 的元素不需要再进行 clearfix。</p>
<h2 id="important"><a href="#important" class="headerlink" title="!important"></a>!important</h2><p><strong>[建议]</strong> 尽量不使用 !important 声明。</p>
<p><strong>[建议]</strong> 当需要强制指定样式且不允许任何场景覆盖时，通过标签内联和 !important 定义样式。</p>
<p><strong>解释</strong><br>必须注意的是，仅在设计上 确实不允许任何其它场景覆盖样式 时，才使用内联的 !important 样式。通常在第三方环境的应用中使用这种方案。下面的 z-index 章节是其中一个特殊场景的典型样例。</p>
<h2 id="z-index"><a href="#z-index" class="headerlink" title="z-index"></a>z-index</h2><p><strong>[建议]</strong> 将 z-index 进行分层，对文档流外绝对定位元素的视觉层级关系进行管理。</p>
<p><strong>解释</strong><br>同层的多个元素，如多个由用户输入触发的 Dialog，在该层级内使用相同的 z-index 或递增 z-index。<br>建议每层包含100个 z-index 来容纳足够的元素，如果每层元素较多，可以调整这个数值。</p>
<hr>
<p><strong>[建议]</strong> 在可控环境下，期望显示在最上层的元素，z-index 指定为 999999。</p>
<p><strong>解释</strong><br>可控环境分成两种，一种是自身产品线环境；还有一种是可能会被其他产品线引用，但是不会被外部第三方的产品引用。<br>不建议取值为 2147483647。以便于自身产品线被其他产品线引用时，当遇到层级覆盖冲突的情况，留出向上调整的空间。</p>
<hr>
<p><strong>[建议]</strong> 在第三方环境下，期望显示在最上层的元素，通过标签内联和 !important，将 z-index 指定为 2147483647。</p>
<p><strong>解释</strong><br>第三方环境对于开发者来说完全不可控。在第三方环境下的元素，为了保证元素不被其页面其他样式定义覆盖，需要采用此做法。</p>
<h1 id="值与单位"><a href="#值与单位" class="headerlink" title="值与单位"></a>值与单位</h1><h2 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h2><p><strong>[强制]</strong> [RULE024] 文本内容必须用双引号包围。</p>
<p><strong>解释</strong><br>文本类型的内容可能在选择器、属性值等内容中。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-tag">html</span><span class="selector-attr">[lang|="zh"]</span> <span class="selector-tag">q</span><span class="selector-pseudo">:before</span> &#123;</div><div class="line">    <span class="attribute">font-family</span>: <span class="string">"Microsoft YaHei"</span>, sans-serif;</div><div class="line">    <span class="attribute">content</span>: <span class="string">"“"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">html</span><span class="selector-attr">[lang|="zh"]</span> <span class="selector-tag">q</span><span class="selector-pseudo">:after</span> &#123;</div><div class="line">    <span class="attribute">font-family</span>: <span class="string">"Microsoft YaHei"</span>, sans-serif;</div><div class="line">    <span class="attribute">content</span>: <span class="string">"”"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-tag">html</span><span class="selector-attr">[lang|=zh]</span> <span class="selector-tag">q</span><span class="selector-pseudo">:before</span> &#123;</div><div class="line">    <span class="attribute">font-family</span>: <span class="string">'Microsoft YaHei'</span>, sans-serif;</div><div class="line">    <span class="attribute">content</span>: <span class="string">'“'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">html</span><span class="selector-attr">[lang|=zh]</span> <span class="selector-tag">q</span><span class="selector-pseudo">:after</span> &#123;</div><div class="line">    <span class="attribute">font-family</span>: <span class="string">"Microsoft YaHei"</span>, sans-serif;</div><div class="line">    <span class="attribute">content</span>: <span class="string">"”"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="数值"><a href="#数值" class="headerlink" title="数值"></a>数值</h2><p><strong>[强制]</strong> [RULE025] 当数值为 0 - 1 之间的小数时，省略整数部分的 0。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-tag">panel</span> &#123;</div><div class="line">    <span class="attribute">opacity</span>: .<span class="number">8</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-tag">panel</span> &#123;</div><div class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="url"><a href="#url" class="headerlink" title="url"></a>url</h2><p><strong>[强制]</strong> [RULE026] url() 函数中的路径不加引号。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(bg.png);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> url() 函数中，如果绝对路径引用外部资源的 URL 协议部分与当前CSS相同，可省去协议部分。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> <span class="selector-tag">body</span> &#123;</div><div class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(//baidu.com/img/bg.png) no-repeat <span class="number">0</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="长度"><a href="#长度" class="headerlink" title="长度"></a>长度</h2><p><strong>[强制]</strong> [RULE028] 长度为 0 时须省略单位。 (也只有长度单位可省)</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">5px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">5px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h2><p><strong>[强制]</strong> [RULE029] RGB颜色值必须使用十六进制记号形式 #rrggbb。不允许使用 rgb()。</p>
<p><strong>解释</strong><br>带有alpha的颜色信息可以使用 rgba()。使用 rgba() 时每个逗号后必须保留一个空格。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-class">.success</span> &#123;</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="built_in">rgba</span>(0, 128, 0, .3);</div><div class="line">    <span class="attribute">border-color</span>: <span class="number">#008000</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-class">.success</span> &#123;</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="built_in">rgba</span>(0,128,0,.3);</div><div class="line">    <span class="attribute">border-color</span>: <span class="built_in">rgb</span>(0, 128, 0);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE030] 颜色值可以缩写时，必须使用缩写形式。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">/* good */</span></div><div class="line"><span class="selector-class">.success</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#aca</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-class">.success</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#aaccaa</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE031] 颜色值不允许使用命名色值。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-class">.success</span> &#123;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#90ee90</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-class">.success</span> &#123;</div><div class="line">    <span class="attribute">color</span>: lightgreen;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 颜色值中的英文字符采用小写。如不用小写也需要保证同一项目内保持大小写一致。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-class">.success</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#aca</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#90ee90</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-class">.success</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#ACA</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#90EE90</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-class">.success</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#ACA</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#90ee90</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="2D-位置"><a href="#2D-位置" class="headerlink" title="2D 位置"></a>2D 位置</h2><p><strong>[强制]</strong> [RULE033] 必须同时给出水平和垂直方向的位置。</p>
<p><strong>解释</strong><br>2D 位置初始值为 0% 0%，但在只有一个方向的值时，另一个方向的值会被解析为 center。为避免理解上的困扰，应同时给出两个方向的值。background-position属性值的定义</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">    <span class="attribute">background-position</span>: center top; <span class="comment">/* 50% 0% */</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">    <span class="attribute">background-position</span>: top; <span class="comment">/* 50% 0% */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="文本编排"><a href="#文本编排" class="headerlink" title="文本编排"></a>文本编排</h1><h2 id="字体族"><a href="#字体族" class="headerlink" title="字体族"></a>字体族</h2><p><strong>[强制]</strong> [RULE034] font-family 属性中的字体族名称应使用字体的英文 Family Name，其中如有空格，须放置在引号中。</p>
<p><strong>解释</strong><br>所谓英文 Family Name，为字体文件的一个元数据，常见名称如下：</p>
<table>
<thead>
<tr>
<th>字体</th>
<th>操作系统</th>
<th>Family Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>宋体 (中易宋体)</td>
<td>Windows</td>
<td>SimSun</td>
</tr>
<tr>
<td>黑体 (中易黑体)</td>
<td>Windows</td>
<td>SimHei</td>
</tr>
<tr>
<td>微软雅黑</td>
<td>Windows</td>
<td>Microsoft YaHei</td>
</tr>
<tr>
<td>微软正黑</td>
<td>Windows</td>
<td>Microsoft JhengHei</td>
</tr>
<tr>
<td>华文黑体</td>
<td>Mac/iOS</td>
<td>STHeiti</td>
</tr>
<tr>
<td>冬青黑体</td>
<td>Mac/iOS</td>
<td>Hiragino Sans GB</td>
</tr>
<tr>
<td>文泉驿正黑</td>
<td>Linux</td>
<td>WenQuanYi Zen Hei</td>
</tr>
<tr>
<td>文泉驿微米黑</td>
<td>Linux</td>
<td>WenQuanYi Micro Hei</td>
</tr>
</tbody>
</table>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">h1</span> &#123;</div><div class="line">    <span class="attribute">font-family</span>: <span class="string">"Microsoft YaHei"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE035] font-family 按「西文字体在前、中文字体在后」、「效果佳 (质量高/更能满足需求) 的字体在前、效果一般的字体在后」的顺序编写，最后必须指定一个通用字体族( serif / sans-serif )。</p>
<p><strong>解释</strong><br>更详细说明可参考 本文 。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* Display according to platform */</span></div><div class="line"><span class="selector-class">.article</span> &#123;</div><div class="line">    <span class="attribute">font-family</span>: Arial, sans-serif;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* Specific for most platforms */</span></div><div class="line"><span class="selector-tag">h1</span> &#123;</div><div class="line">    <span class="attribute">font-family</span>: <span class="string">"Helvetica Neue"</span>, Arial, <span class="string">"Hiragino Sans GB"</span>, <span class="string">"WenQuanYi Micro Hei"</span>, <span class="string">"Microsoft YaHei"</span>, sans-serif;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE036] font-family 不区分大小写，但在同一个项目中，同样的 Family Name 大小写必须统一。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">/* good */</span></div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">    <span class="attribute">font-family</span>: Arial, sans-serif;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">h1</span> &#123;</div><div class="line">    <span class="attribute">font-family</span>: Arial, <span class="string">"Microsoft YaHei"</span>, sans-serif;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">    <span class="attribute">font-family</span>: arial, sans-serif;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">h1</span> &#123;</div><div class="line">    <span class="attribute">font-family</span>: Arial, <span class="string">"Microsoft YaHei"</span>, sans-serif;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="字号"><a href="#字号" class="headerlink" title="字号"></a>字号</h2><p><strong>[强制]</strong> [RULE037] 需要在 Windows 平台显示的中文内容，其字号应不小于 12px。</p>
<p><strong>解释</strong><br>由于 Windows 的字体渲染机制，小于 12px 的文字显示效果极差、难以辨认。</p>
<h2 id="字体风格"><a href="#字体风格" class="headerlink" title="字体风格"></a>字体风格</h2><p><strong>[建议]</strong> 需要在 Windows 平台显示的中文内容，不要使用除 normal 外的 font-style。其他平台也应慎用。</p>
<p><strong>解释</strong><br>由于中文字体没有 italic 风格的实现，所有浏览器下都会 fallback 到 obilique 实现 (自动拟合为斜体)，小字号下 (特别是 Windows 下会在小字号下使用点阵字体的情况下) 显示效果差，造成阅读困难。</p>
<h2 id="字重"><a href="#字重" class="headerlink" title="字重"></a>字重</h2><p><strong>[强制]</strong> [RULE039] font-weight 属性必须使用数值方式描述。</p>
<p><strong>解释</strong><br>CSS 的字重分 100 – 900 共九档，但目前受字体本身质量和浏览器的限制，实际上支持 400 和 700 两档，分别等价于关键词 normal 和 bold。<br>浏览器本身使用一系列 启发式规则 来进行匹配，在 <700 时一般匹配字体的="" regular="" 字重，="">=700 时匹配 Bold 字重。<br>但已有浏览器开始支持 =600 时匹配 Semibold 字重 (见 此表)，故使用数值描述增加了灵活性，也更简短。</700></p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-tag">h1</span> &#123;</div><div class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-tag">h1</span> &#123;</div><div class="line">    <span class="attribute">font-weight</span>: bold;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="行高"><a href="#行高" class="headerlink" title="行高"></a>行高</h2><p><strong>[建议]</strong> line-height 在定义文本段落时，应使用数值。</p>
<p><strong>解释</strong><br>将 line-height 设置为数值，浏览器会基于当前元素设置的 font-size 进行再次计算。在不同字号的文本段落组合中，能达到较为舒适的行间间隔效果，避免在每个设置了 font-size 都需要设置 line-height。<br>当 line-height 用于控制垂直居中时，还是应该设置成与容器高度一致。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.container</span> &#123;</div><div class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="变换与动画"><a href="#变换与动画" class="headerlink" title="变换与动画"></a>变换与动画</h1><p><strong>[强制]</strong> [RULE041] 使用 transition 时应指定 transition-property。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">    <span class="attribute">transition</span>: color <span class="number">1s</span>, border-color <span class="number">1s</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">    <span class="attribute">transition</span>: all <span class="number">1s</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 尽可能在浏览器能高效实现的属性上添加过渡和动画。</p>
<p><strong>解释</strong><br>见 本文 ，在可能的情况下应选择这样四种变换：</p>
<ul>
<li>transform: translate(npx, npx);</li>
<li>transform: scale(n);</li>
<li>transform: rotate(ndeg);</li>
<li>opacity: 0..1;<br>典型的，可以使用 translate 来代替 left 作为动画属性。</li>
</ul>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* good */</span></div><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">    <span class="attribute">transition</span>: transform <span class="number">1s</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.box</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(20px); <span class="comment">/* move right for 20px */</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* bad */</span></div><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">transition</span>: left <span class="number">1s</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.box</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">left</span>: <span class="number">20px</span>; <span class="comment">/* move right for 20px */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="响应式"><a href="#响应式" class="headerlink" title="响应式"></a>响应式</h1><p><strong>[强制]</strong> Media Query 不得单独编排，必须与相关的规则一起定义。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* Good */</span></div><div class="line"><span class="comment">/* header styles */</span></div><div class="line">@<span class="keyword">media</span> (...) &#123;</div><div class="line">    <span class="comment">/* header styles */</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* main styles */</span></div><div class="line">@<span class="keyword">media</span> (...) &#123;</div><div class="line">    <span class="comment">/* main styles */</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* footer styles */</span></div><div class="line">@<span class="keyword">media</span> (...) &#123;</div><div class="line">    <span class="comment">/* footer styles */</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* Bad */</span></div><div class="line"><span class="comment">/* header styles */</span></div><div class="line"><span class="comment">/* main styles */</span></div><div class="line"><span class="comment">/* footer styles */</span></div><div class="line"></div><div class="line">@<span class="keyword">media</span> (...) &#123;</div><div class="line">    <span class="comment">/* header styles */</span></div><div class="line">    <span class="comment">/* main styles */</span></div><div class="line">    <span class="comment">/* footer styles */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> [RULE044] Media Query 如果有多个逗号分隔的条件时，应将每个条件放在单独一行中。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span></div><div class="line">(-webkit-min-device-pixel-ratio: 2), /* Webkit-based browsers */</div><div class="line">(<span class="selector-tag">min--moz-device-pixel-ratio</span>: 2),    <span class="comment">/* Older Firefox browsers (prior to Firefox 16) */</span></div><div class="line">(<span class="selector-tag">min-resolution</span>: 2<span class="selector-tag">dppx</span>),             <span class="comment">/* The standard way */</span></div><div class="line">(<span class="selector-tag">min-resolution</span>: 192<span class="selector-tag">dpi</span>) &#123;           <span class="comment">/* dppx fallback */</span></div><div class="line">    <span class="comment">/* Retina-specific stuff here */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 尽可能给出在高分辨率设备 (Retina) 下效果更佳的样式。</p>
<h1 id="兼容性"><a href="#兼容性" class="headerlink" title="兼容性"></a>兼容性</h1><h2 id="属性前缀"><a href="#属性前缀" class="headerlink" title="属性前缀"></a>属性前缀</h2><p><strong>[强制]</strong> [RULE046] 带私有前缀的属性由长到短排列，按冒号位置对齐。</p>
<p><strong>解释</strong><br>标准属性放在最后，按冒号对齐方便阅读，也便于在编辑器内进行多行编辑。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">    <span class="attribute">-webkit-box-sizing</span>: border-box;</div><div class="line">       <span class="attribute">-moz-box-sizing</span>: border-box;</div><div class="line">            <span class="attribute">box-sizing</span>: border-box;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Hack"><a href="#Hack" class="headerlink" title="Hack"></a>Hack</h2><p><strong>[建议]</strong> 需要添加 hack 时应尽可能考虑是否可以采用其他方式解决。</p>
<p><strong>解释</strong><br>如果能通过合理的 HTML 结构或使用其他的 CSS 定义达到理想的样式，则不应该使用 hack 手段解决问题。通常 hack 会导致维护成本的增加。</p>
<hr>
<p><strong>[建议]</strong> 尽量使用 选择器 hack 处理兼容性，而非 属性 hack。</p>
<p><strong>解释</strong><br>尽量使用符合 CSS 语法的 selector hack，可以避免一些第三方库无法识别 hack 语法的问题。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* IE 7 */</span></div><div class="line">*<span class="selector-pseudo">:first-child</span> + <span class="selector-tag">html</span> <span class="selector-id">#header</span> &#123;</div><div class="line">    <span class="attribute">margin-top</span>: <span class="number">3px</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">5px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* IE 6 */</span></div><div class="line">* <span class="selector-tag">html</span> <span class="selector-id">#header</span> &#123;</div><div class="line">    <span class="attribute">margin-top</span>: <span class="number">5px</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">4px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 尽量使用简单的 属性 hack。</p>
<p><strong>示例</strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">    <span class="attribute">_display</span>: inline; <span class="comment">/* fix double margin */</span></div><div class="line">    <span class="attribute">float</span>: left;</div><div class="line">    <span class="attribute">margin-left</span>: <span class="number">20px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.container</span> &#123;</div><div class="line">    <span class="attribute">overflow</span>: hidden;</div><div class="line">    *zoom: 1; /* triggering hasLayout */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Expression"><a href="#Expression" class="headerlink" title="Expression"></a>Expression</h2><p><strong>[强制]</strong> [RULE050] 禁止使用 Expression。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mooncool.github.io/2017/05/11/css-style-guide/" data-id="cjcg9ph2v000c2eyrizhkdec9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码规范/">代码规范</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-html-style-guide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/10/html-style-guide/" class="article-date">
  <time datetime="2017-05-10T15:35:29.000Z" itemprop="datePublished">2017-05-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/10/html-style-guide/">HTML代码规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="代码风格"><a href="#代码风格" class="headerlink" title="代码风格"></a>代码风格</h1><h2 id="缩进与换行"><a href="#缩进与换行" class="headerlink" title="缩进与换行"></a>缩进与换行</h2><p><strong>[强制]</strong> 使用 4个空格做为一个缩进层级，不允许使用 2个空格 或 tab字符。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>first<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>second<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><em>[建议]</em> 每行不得超过 120个字符。</p>
<p><strong>解释</strong><br>过长的代码不容易阅读与维护。但是考虑到 HTML 的特殊性，不做硬性要求。</p>
<h2 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h2><p><strong>[强制]</strong> class 必须单词全字母小写，单词间以 - 分隔。<br><strong>[强制]</strong> class 必须代表相应模块或部件的内容或功能，不得以样式信息进行命名。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sidebar"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>[强制]</strong> 元素 id 必须保证页面唯一。</p>
<p><strong>解释</strong><br>同一个页面中，不同的元素包含相同的 id，不符合 id 的属性含义。并且使用 document.getElementById 时可能导致难以追查的问题。</p>
<hr>
<p><em>[建议]</em> id 建议单词全字母小写，单词间以 - 分隔。同项目必须保持风格一致。<br><em>[建议]</em> id、 class 命名，在避免冲突并描述清楚的前提下尽可能短。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"nav"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"navigation"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"comment"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"com"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"author"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"red"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>[强制]</strong> 禁止为了 hook 脚本 ，创建无样式信息的 class。</p>
<p><strong>解释</strong><br>不允许 class 只用于让 JavaScript 选择某些元素，class 应该具有明确的语义和样式。否则容易导致 css class 泛滥。<br>使用 id、属性选择作为 hook 是更好的方式。</p>
<hr>
<p><strong>[强制]</strong> 同一页面，应避免使用相同的 name 与 id。</p>
<p><strong>解释</strong><br>IE 浏览器会混淆元素的 id 和 name 属性， document.getElementById 可能获得不期望的元素。所以在对元素的 id 与 name 属性的命名需要非常小心。<br>一个比较好的实践是，为 id 和 name 使用不同的命名法。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"foo"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"foo"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="javascript"><span class="comment">// IE6 将显示 INPUT</span></span></div><div class="line"><span class="javascript">alert(<span class="built_in">document</span>.getElementById(<span class="string">'foo'</span>).tagName);</span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h3><p><strong>[强制]</strong> 标签名必须使用小写字母。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello StyleGuide!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">P</span>&gt;</span>Hello StyleGuide!<span class="tag">&lt;/<span class="name">P</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 对于无需自闭合的标签，不允许自闭合。</p>
<p><strong>解释</strong><br>常见无需自闭合标签有input、br、img、hr等。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"title"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"title"</span> /&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 对 HTML5 中规定允许省略的闭合标签，不允许省略闭合标签。</p>
<p><strong>解释</strong><br>对代码体积要求非常严苛的场景，可以例外。比如：第三方页面使用的投放系统。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>first<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>second<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>first</div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>second</div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 标签使用必须符合标签嵌套规则。</p>
<p><strong>解释</strong><br>比如 div 不得置于 p 中，tbody 必须置于 table 中。<br>详细的标签嵌套规则参见 HTML DTD 中的 Elements 定义部分。</p>
<hr>
<p><strong>[建议]</strong> HTML 标签的使用应该遵循标签的语义。</p>
<p><strong>解释</strong><br>下面是常见标签语义</p>
<ul>
<li>p - 段落</li>
<li>h1,h2,h3,h4,h5,h6 - 层级标题</li>
<li>strong,em - 强调</li>
<li>ins - 插入</li>
<li>del - 删除</li>
<li>abbr - 缩写</li>
<li>code - 代码标识</li>
<li>cite - 引述来源作品的标题</li>
<li>q - 引用</li>
<li>blockquote - 一段或长篇引用</li>
<li>ul - 无序列表</li>
<li>ol - 有序列表</li>
<li>dl,dt,dd - 定义列表</li>
</ul>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Esprima serves as an important <span class="tag">&lt;<span class="name">strong</span>&gt;</span>building block<span class="tag">&lt;/<span class="name">strong</span>&gt;</span> for some JavaScript language tools.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Esprima serves as an important <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"strong"</span>&gt;</span>building block<span class="tag">&lt;/<span class="name">span</span>&gt;</span> for some JavaScript language tools.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 在 CSS 可以实现相同需求的情况下不得使用表格进行布局。</p>
<p><strong>解释</strong><br>在兼容性允许的情况下应尽量保持语义正确性。对网格对齐和拉伸性有严格要求的场景允许例外，如多列复杂表单。</p>
<hr>
<p><strong>[建议]</strong> 标签的使用应尽量简洁，减少不必要的标签。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"avatar"</span> <span class="attr">src</span>=<span class="string">"image.png"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"avatar"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image.png"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p><strong>[强制]</strong> 属性名必须使用小写字母。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">cellspacing</span>=<span class="string">"0"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">cellSpacing</span>=<span class="string">"0"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">table</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[强制]</strong> 属性值必须用双引号包围。</p>
<p><strong>解释</strong><br>不允许使用单引号，不允许不使用引号。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"esl.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'esl.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">esl.js</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 布尔类型的属性，建议不添加属性值。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">disabled</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"1"</span> <span class="attr">checked</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 自定义属性建议以 xxx- 为前缀，推荐使用 data-。</p>
<p><strong>解释</strong><br>使用前缀有助于区分自定义属性和标准定义的属性。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">data-ui-type</span>=<span class="string">"Select"</span>&gt;</span><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="通用"><a href="#通用" class="headerlink" title="通用"></a>通用</h2><h3 id="DOCTYPE"><a href="#DOCTYPE" class="headerlink" title="DOCTYPE"></a>DOCTYPE</h3><p><strong>[强制]</strong> 使用 HTML5 的 doctype 来启用标准模式，建议使用大写的 DOCTYPE。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 启用 IE Edge 模式。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=Edge"</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 在 html 标签上设置正确的 lang 属性。</p>
<p><strong>解释</strong><br>有助于提高页面的可访问性，如：让语音合成工具确定其所应该采用的发音，令翻译工具确定其翻译语言等。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h3><p><strong>[强制]</strong> 页面必须使用精简形式，明确指定字符编码。指定字符编码的 meta 必须是 head 的第一个直接子元素。</p>
<p><strong>解释</strong><br>见 HTML5 Charset能用吗 一文。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">        ......</div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        ......</div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> HTML 文件使用无 BOM 的 UTF-8 编码。</p>
<p><strong>解释</strong><br>UTF-8 编码具有更广泛的适应性。BOM 在使用程序或工具处理文件时可能造成不必要的干扰。</p>
<h3 id="CSS和JavaScript引入"><a href="#CSS和JavaScript引入" class="headerlink" title="CSS和JavaScript引入"></a>CSS和JavaScript引入</h3><p><strong>[强制]</strong> 引入 CSS 时必须指明 rel=”stylesheet”。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"page.css"</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 引入 CSS 和 JavaScript 时无须指明 type 属性。</p>
<p><strong>解释</strong><br>text/css 和 text/javascript 是 type 的默认值。</p>
<hr>
<p><strong>[建议]</strong> 展现定义放置于外部 CSS 中，行为定义放置于外部 JavaScript 中。</p>
<p><strong>解释</strong><br>结构-样式-行为的代码分离，对于提高代码的可阅读性和维护性都有好处。</p>
<hr>
<p><strong>[建议]</strong> 在 head 中引入页面需要的所有 CSS 资源。</p>
<p><strong>解释</strong><br>在页面渲染的过程中，新的CSS可能导致元素的样式重新计算和绘制，页面闪烁。</p>
<hr>
<p><strong>[建议]</strong> JavaScript 应当放在页面末尾，或采用异步加载。</p>
<p><strong>解释</strong><br>将 script 放在页面中间将阻断页面的渲染。出于性能方面的考虑，如非必要，请遵守此条建议。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- a lot of elements --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"init-behavior.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 移动环境或只针对现代浏览器设计的 Web 应用，如果引用外部资源的 URL 协议部分与页面相同，建议省略协议前缀。</p>
<p><strong>解释</strong><br>使用 protocol-relative URL 引入 CSS，在 IE7/8 下，会发两次请求。是否使用 protocol-relative URL 应充分考虑页面针对的环境。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//s1.bdstatic.com/cache/static/jquery-1.10.2.min_f2fb5194.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="head"><a href="#head" class="headerlink" title="head"></a>head</h2><h3 id="title"><a href="#title" class="headerlink" title="title"></a>title</h3><p><strong>[强制]</strong> 页面必须包含 title 标签声明标题。</p>
<hr>
<p><strong>[强制]</strong> title 必须作为 head 的直接子元素，并紧随 charset 声明之后。</p>
<p><strong>解释</strong><br>title 中如果包含 ascii 之外的字符，浏览器需要知道字符编码类型才能进行解码，否则可能导致乱码。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>页面标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="favicon"><a href="#favicon" class="headerlink" title="favicon"></a>favicon</h3><p><strong>[强制]</strong> 保证 favicon 可访问。</p>
<p><strong>解释</strong><br>在未指定 favicon 时，大多数浏览器会请求 Web Server 根目录下的 favicon.ico 。为了保证favicon可访问，避免404，必须遵循以下两种方法之一：</p>
<ol>
<li>在 Web Server 根目录放置 favicon.ico 文件。</li>
<li>使用 link 指定 favicon。</li>
</ol>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"path/to/favicon.ico"</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="viewport"><a href="#viewport" class="headerlink" title="viewport"></a>viewport</h3><p><strong>[建议]</strong> 若页面欲对移动设备友好，需指定页面的 viewport。</p>
<p><strong>解释</strong><br>viewport meta tag可以设置可视区域的宽度和初始缩放大小，避免在移动设备上出现页面展示不正常。<br>比如，在页面宽度小于 980px 时，若需 iOS 设备友好，应当设置 viewport 的 width 值来适应你的页面宽度。同时因为不同移动设备分辨率不同，在设置时，应当使用 device-width 和 device-height 变量。<br>另外，为了使 viewport 正常工作，在页面内容样式布局设计上也要做相应调整，如避免绝对定位等。关于 viewport 的更多介绍，可以参见 Safari Web Content Guide的介绍</p>
<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><p><strong>[强制]</strong> 禁止 img 的 src 取值为空。延迟加载的图片也要增加默认的 src。</p>
<p><strong>解释</strong><br>src 取值为空，会导致部分浏览器重新加载一次当前页面，参考：<a href="https://developer.yahoo.com/performance/rules.html#emptysrc" target="_blank" rel="noopener">https://developer.yahoo.com/performance/rules.html#emptysrc</a></p>
<hr>
<p><strong>[建议]</strong> 避免为 img 添加不必要的 title 属性。</p>
<p><strong>解释</strong><br>多余的 title 影响看图体验，并且增加了页面尺寸。</p>
<hr>
<p><strong>[建议]</strong> 为重要图片添加 alt 属性。</p>
<p><strong>解释</strong><br>可以提高图片加载失败时的用户体验。</p>
<hr>
<p><strong>[建议]</strong> 添加 width 和 height 属性，以避免页面抖动。</p>
<hr>
<p><strong>[建议]</strong> 有下载需求的图片采用 img 标签实现，无下载需求的图片采用 CSS 背景图实现。</p>
<p><strong>解释</strong><br>产品 logo、用户头像、用户产生的图片等有潜在下载需求的图片，以 img 形式实现，能方便用户下载。 无下载需求的图片，比如：icon、背景、代码使用的图片等，尽可能采用 css 背景图实现。</p>
<h2 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h2><h3 id="控件标题"><a href="#控件标题" class="headerlink" title="控件标题"></a>控件标题</h3><p><strong>[强制]</strong> 有文本标题的控件必须使用 label 标签将其与其标题相关联。</p>
<p><strong>解释</strong><br>有两种方式：</p>
<ol>
<li>将控件置于 label 内。</li>
<li>label 的 for 属性指向控件的 id。<br>推荐使用第一种，减少不必要的 id。如果 DOM 结构不允许直接嵌套，则应使用第二种。</li>
</ol>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"confirm"</span> <span class="attr">value</span>=<span class="string">"on"</span>&gt;</span> 我已确认上述条款<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"username"</span>&gt;</span>用户名：<span class="tag">&lt;/<span class="name">label</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"textbox"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">id</span>=<span class="string">"username"</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="按钮"><a href="#按钮" class="headerlink" title="按钮"></a>按钮</h3><p><strong>[强制]</strong> 使用 button 元素时必须指明 type属性值。</p>
<p><strong>解释</strong><br>button 元素的默认 type 为 submit，如果被置于 form 元素中，点击后将导致表单提交。为显示区分其作用方便理解，必须给出 type 属性。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 尽量不要使用按钮类元素的 name 属性。</p>
<p><strong>解释</strong><br>由于浏览器兼容性问题，使用按钮的 name 属性会带来许多难以发现的问题。具体情况可参考此文。</p>
<h3 id="可访问性-A11Y"><a href="#可访问性-A11Y" class="headerlink" title="可访问性 (A11Y)"></a>可访问性 (A11Y)</h3><p><strong>[建议]</strong> 负责主要功能的按钮在 DOM 中的顺序应靠前。</p>
<p><strong>解释</strong><br>负责主要功能的按钮应相对靠前，以提高可访问性。如果在 CSS 中指定了 float: right 则可能导致视觉上主按钮在前，而 DOM 中主按钮靠后的情况。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="css"><span class="selector-class">.buttons</span> <span class="selector-class">.button-group</span> &#123;</span></div><div class="line"><span class="undefined">    float: right;</span></div><div class="line"><span class="undefined">&#125;</span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buttons"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"button-group"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="css"><span class="selector-class">.buttons</span> <span class="selector-tag">button</span> &#123;</span></div><div class="line"><span class="undefined">    float: right;</span></div><div class="line"><span class="undefined">&#125;</span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buttons"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 当使用 JavaScript 进行表单提交时，如果条件允许，应使原生提交功能正常工作。</p>
<p><strong>解释</strong><br>当浏览器 JS 运行错误或关闭 JS 时，提交功能将无法工作。如果正确指定了 form 元素的 action 属性和表单控件的 name 属性时，提交仍可继续进行。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/login"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"用户名"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">placeholder</span>=<span class="string">"密码"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 在针对移动设备开发的页面时，根据内容类型指定输入框的 type 属性。</p>
<p><strong>解释</strong><br>根据内容类型指定输入框类型，能获得能友好的输入体验。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"date"</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="多媒体"><a href="#多媒体" class="headerlink" title="多媒体"></a>多媒体</h2><p><strong>[建议]</strong> 当在现代浏览器中使用 audio 以及 video 标签来播放音频、视频时，应当注意格式。</p>
<p><strong>解释</strong><br>音频应尽可能覆盖到如下格式：<br>•    MP3<br>•    WAV<br>•    Ogg<br>视频应尽可能覆盖到如下格式：<br>•    MP4<br>•    WebM<br>•    Ogg</p>
<hr>
<p><strong>[建议]</strong> 在支持 HTML5 的浏览器中优先使用 audio 和 video 标签来定义音视频元素。</p>
<hr>
<p><strong>[建议]</strong> 使用退化到插件的方式来对多浏览器进行支持。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"audio.mp3"</span> <span class="attr">type</span>=<span class="string">"audio/mpeg"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"audio.ogg"</span> <span class="attr">type</span>=<span class="string">"audio/ogg"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">object</span> <span class="attr">width</span>=<span class="string">"100"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">data</span>=<span class="string">"audio.mp3"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">embed</span> <span class="attr">width</span>=<span class="string">"100"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">src</span>=<span class="string">"audio.swf"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">object</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">width</span>=<span class="string">"100"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">controls</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"video.mp4"</span> <span class="attr">type</span>=<span class="string">"video/mp4"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"video.ogg"</span> <span class="attr">type</span>=<span class="string">"video/ogg"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">object</span> <span class="attr">width</span>=<span class="string">"100"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">data</span>=<span class="string">"video.mp4"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">embed</span> <span class="attr">width</span>=<span class="string">"100"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">src</span>=<span class="string">"video.swf"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">object</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 只在必要的时候开启音视频的自动播放。</p>
<hr>
<p><strong>[建议]</strong> 在 object 标签内部提供指示浏览器不支持该标签的说明。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">object</span> <span class="attr">width</span>=<span class="string">"100"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">data</span>=<span class="string">"something.swf"</span>&gt;</span>DO NOT SUPPORT THIS TAG<span class="tag">&lt;/<span class="name">object</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="模板中的-HTML"><a href="#模板中的-HTML" class="headerlink" title="模板中的 HTML"></a>模板中的 HTML</h2><p><strong>[建议]</strong> 模板代码的缩进优先保证 HTML 代码的缩进规则。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line">&#123;if $display == true&#125;</div><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    &#123;foreach $item_list as $item&#125;</div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;$item.name&#125;<span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">    &#123;/foreach&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#123;/if&#125;</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line">&#123;if $display == true&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">    &#123;foreach $item_list as $item&#125;</div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;$item.name&#125;<span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">    &#123;/foreach&#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#123;/if&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 模板代码应以保证 HTML单个标签语法的正确性为基本原则。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"&#123;if $item.type_id == $current_type&#125;focus&#123;/if&#125;"</span>&gt;</span>&#123; $item.type_name &#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span> &#123;<span class="attr">if</span> $<span class="attr">item.type_id</span> == <span class="string">$current_type&#125;</span> <span class="attr">class</span>=<span class="string">"focus"</span>&#123;/<span class="attr">if</span>&#125;&gt;</span>&#123; $item.type_name &#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<p><strong>[建议]</strong> 在循环处理模板数据构造表格时，若要求每行输出固定的个数，建议先将数据分组，之后再循环输出。</p>
<p><strong>示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></div><div class="line">    &#123;foreach $item_list as $item_group&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">        &#123;foreach $item_group as $item&#125;</div><div class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123; $item.name &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">        &#123;/foreach&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">    &#123;/foreach&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">    &#123;foreach $item_list as $item&#125;</div><div class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123; $item.name &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">        &#123;if $item@iteration is div by 5&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">        &#123;/if&#125;</div><div class="line">    &#123;/foreach&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://mooncool.github.io/2017/05/10/html-style-guide/" data-id="cjcg9ph2w000e2eyrhk1tc3jb" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码规范/">代码规范</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/代码规范/">代码规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/技术/">技术</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/代码规范/" style="font-size: 15px;">代码规范</a> <a href="/tags/技术/" style="font-size: 20px;">技术</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09/">九月 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">八月 2012</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/11/02/operation-guide/">运维规范</a>
          </li>
        
          <li>
            <a href="/2017/10/09/use-hard-disk-as-ram/">Linux下把硬盘当作内存</a>
          </li>
        
          <li>
            <a href="/2017/09/08/shadowsocks/">Shadowsocks安装及配置</a>
          </li>
        
          <li>
            <a href="/2017/08/09/term-dictionary-2017/">门窗2017 术语-变量名对照表</a>
          </li>
        
          <li>
            <a href="/2017/07/27/rest-api-design-guide/">RESTFUL API 设计规范</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Moon<br>
      Powered by <a href="https://mooncool.github.io/" target="_blank">月影剑博客</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>